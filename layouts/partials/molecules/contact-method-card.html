{{- /*
  Contact Method Card Molecule

  Displays a contact method (phone, email, location) with icon, label, and value.
  Used in contact info sections.

  Parameters:
  - icon (required): Icon name (e.g., "las la-phone", "las la-envelope", "las la-map-marker")
  - label (required): Contact method label (e.g., "Phone", "Email", "Office")
  - value (required): Contact value (phone number, email, address)
  - link (optional): Link for value (tel:, mailto:, or map URL)
  - secondaryValue (optional): Additional info (e.g., "Available Mon-Fri 9-5")
  - variant (optional): Color variant (primary|secondary|tertiary|success|warning|error|info|neutral) - default: primary
  - size (optional): Card size (sm|md|lg) - default: md

  Example Usage:
  {{ partial "molecules/contact-method-card.html" (dict
    "icon" "las la-phone"
    "label" "Phone"
    "value" "+40 123 456 789"
    "link" "tel:+40123456789"
    "secondaryValue" "Available Mon-Fri 9-5"
    "variant" "primary"
    "size" "md"
  ) }}

  {{ partial "molecules/contact-method-card.html" (dict
    "icon" "las la-envelope"
    "label" "Email"
    "value" "contact@example.com"
    "link" "mailto:contact@example.com"
    "variant" "secondary"
  ) }}

  {{ partial "molecules/contact-method-card.html" (dict
    "icon" "las la-map-marker"
    "label" "Office"
    "value" "Strada Exemplu 123, București"
    "link" "https://maps.google.com/?q=Strada+Exemplu+123+București"
    "variant" "tertiary"
  ) }}
*/ -}}

{{- /* Parameter validation */ -}}
{{- if not .icon -}}
  {{- warnf "contact-method-card.html: Missing required parameter 'icon'" -}}
{{- end -}}
{{- if not .label -}}
  {{- warnf "contact-method-card.html: Missing required parameter 'label'" -}}
{{- end -}}
{{- if not .value -}}
  {{- warnf "contact-method-card.html: Missing required parameter 'value'" -}}
{{- end -}}

{{- /* Set defaults */ -}}
{{- $variant := .variant | default "primary" -}}
{{- $size := .size | default "md" -}}

{{- /* Validate variant */ -}}
{{- $validVariants := slice "primary" "secondary" "tertiary" "success" "warning" "error" "info" "neutral" -}}
{{- if not (in $validVariants $variant) -}}
  {{- warnf "contact-method-card.html: Invalid variant '%s'. Using 'primary'. Valid options: %s" $variant (delimit $validVariants ", ") -}}
  {{- $variant = "primary" -}}
{{- end -}}

{{- /* Validate size */ -}}
{{- $validSizes := slice "sm" "md" "lg" -}}
{{- if not (in $validSizes $size) -}}
  {{- warnf "contact-method-card.html: Invalid size '%s'. Using 'md'. Valid options: %s" $size (delimit $validSizes ", ") -}}
  {{- $size = "md" -}}
{{- end -}}

{{- /* Build card classes */ -}}
{{- $cardClass := "c-contact-method" -}}
{{- $cardClass = printf "%s c-contact-method--%s c-contact-method--%s" $cardClass $variant $size -}}

<div class="{{ $cardClass }}">
  {{- /* Icon wrapper */ -}}
  <div class="c-contact-method__icon-wrapper">
    {{- partial "atoms/icon.html" (dict
      "name" .icon
      "variant" $variant
      "size" (cond (eq $size "sm") "md" (cond (eq $size "md") "lg" "xl"))
      "class" "c-contact-method__icon"
    ) -}}
  </div>

  <div class="c-contact-method__content">
    {{- /* Label */ -}}
    <div class="c-contact-method__label">
      {{ .label }}
    </div>

    {{- /* Value (with optional link) */ -}}
    {{- if .link -}}
      <a href="{{ .link }}" class="c-contact-method__value c-contact-method__value--link">
        {{ .value }}
        {{- partial "atoms/icon.html" (dict
          "name" "las la-external-link-alt"
          "size" "xs"
          "class" "c-contact-method__link-icon"
        ) -}}
      </a>
    {{- else -}}
      <div class="c-contact-method__value">
        {{ .value }}
      </div>
    {{- end -}}

    {{- /* Secondary value (optional additional info) */ -}}
    {{- if .secondaryValue -}}
      <div class="c-contact-method__secondary">
        {{ .secondaryValue }}
      </div>
    {{- end -}}
  </div>
</div>
