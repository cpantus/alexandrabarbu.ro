// ==================================
// ICON MIXINS - Gradient Icon Wrappers
// ==================================
//
// Purpose: Unified icon rendering system for v4.0 gradient circles
// Supports Line Awesome, Font Awesome, custom SVG icons
//
// Last Updated: 2025-11-19 (Phase 2 - System Layer Refactoring)
// Version: 2.0.0 (ITCSS Architecture - Mixins Only, NO CSS Output)
//

/**
 * Base Icon Circle
 * Creates circular gradient background container
 * @param {string} $size - Circle size (sm: 48px, md: 64px, lg: 84px, xl: 104px)
 * @param {string} $variant - Color variant (primary, secondary, coral, etc.)
 * NOTE: Updated size scale for better visual hierarchy (v2.1)
 */
@mixin icon-circle($size: 'md', $variant: 'primary') {
  // Size map (uses CSS custom properties)
  $sizes: (
    'sm': var(--icon-circle-sm),   // 48px
    'md': var(--icon-circle-md),   // 64px (default)
    'lg': var(--icon-circle-lg),   // 84px
    'xl': var(--icon-circle-xl),   // 104px
  );

  $circle-size: map-get($sizes, $size);

  // Base circle styling
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: $circle-size;
  height: $circle-size;
  border-radius: $radius-full;
  flex-shrink: 0;

  // Radial gradient background for depth (uses CSS custom properties)
  @if $variant == 'primary' {
    background: var(--icon-circle-radial-primary);
  } @else if $variant == 'secondary' {
    background: var(--icon-circle-radial-secondary);
  } @else if $variant == 'coral' {
    background: var(--icon-circle-radial-coral);
  } @else if $variant == 'premium' {
    background: var(--icon-circle-radial-premium);
  } @else if $variant == 'sage' {
    background: var(--icon-circle-radial-sage);
  } @else if $variant == 'info' {
    background: var(--icon-circle-radial-info);
  } @else if $variant == 'gold' {
    background: var(--icon-circle-radial-gold);
  } @else if $variant == 'primary-gold' {
    background: var(--icon-circle-radial-primary);
  } @else {
    // Fallback to primary
    background: var(--icon-circle-radial-primary);
  }

  // Icon inside circle
  i, svg {
    @if $variant == 'primary-gold' {
      color: var(--icon-circle-color-gold);
    } @else {
      color: var(--icon-circle-color);
    }
    font-size: calc(#{$circle-size} * var(--icon-circle-icon-size-ratio)); // 45% of container
    line-height: 1;
  }

  // Subtle shadow for depth
  box-shadow: var(--icon-circle-shadow);

  // Smooth transitions
  transition: var(--icon-circle-transition);

  // Hover effect: lift + scale + stronger shadow
  &:hover {
    transform: var(--icon-circle-transform-hover);
    box-shadow: var(--icon-circle-shadow-hover);
  }
}

/**
 * Icon Circle with Glassmorphism
 * Creates frosted glass effect icon container
 * @param {string} $size - Circle size (sm, md, lg, xl)
 * @param {string} $variant - Color variant (primary, secondary, etc.)
 * @param {number} $blur - Backdrop blur amount (default: 12px)
 */
@mixin icon-circle-glass($size: 'md', $variant: 'primary', $blur: null) {
  @include icon-circle($size, $variant);

  // Glassmorphism overlay
  position: relative;
  $blur-amount: if($blur, $blur, var(--icon-glass-blur));
  backdrop-filter: blur($blur-amount);
  -webkit-backdrop-filter: blur($blur-amount);

  // Semi-transparent gradient (uses CSS custom properties)
  @if $variant == 'primary' {
    background: var(--icon-glass-bg-primary);
  } @else if $variant == 'secondary' {
    background: var(--icon-glass-bg-secondary);
  } @else if $variant == 'coral' {
    background: var(--icon-glass-bg-coral);
  }

  // Glass border
  border: var(--icon-glass-border);
}

/**
 * Icon Flat (No Circle)
 * Applies color only, no background container
 * @param {string} $variant - Color variant (primary, secondary, etc.)
 */
@mixin icon-flat($variant: 'primary') {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  i, svg {
    @if $variant == 'primary' {
      color: var(--icon-flat-primary-color);
    } @else if $variant == 'secondary' {
      color: var(--icon-flat-secondary-color);
    } @else if $variant == 'coral' {
      color: var(--icon-flat-coral-color);
    } @else if $variant == 'sage' {
      color: var(--icon-flat-sage-color);
    } @else {
      color: var(--icon-flat-primary-color); // Fallback
    }

    font-size: $icon-xl; // 32px default
    line-height: 1;
  }

  transition: transform $duration-fast $ease-out;

  &:hover {
    transform: var(--icon-flat-transform-hover);
  }
}

/**
 * Icon with Text Badge
 * Adds small text label below icon circle
 * @param {string} $size - Icon circle size
 * @param {string} $variant - Color variant
 */
@mixin icon-with-badge($size: 'md', $variant: 'primary') {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: $space-2;

  .icon-circle {
    @include icon-circle($size, $variant);
  }

  .icon-badge {
    font-size: $text-xs;
    font-weight: $weight-semibold;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: $space-1 $space-2;
    border-radius: $radius-sm;

    // Uses color tokens (these remain as SCSS vars, no CSS custom properties needed for these light shades)
    @if $variant == 'primary' {
      background: $forest-100;
      color: $forest-700;
    } @else if $variant == 'secondary' {
      background: $sage-100;
      color: $sage-700;
    } @else if $variant == 'coral' {
      background: $coral-100;
      color: $coral-700;
    }
  }
}

// ==================================
// USAGE RULES
// ==================================
// 1. Mixins provide styling logic, NO CSS output here
// 2. Component classes use these mixins in 06-components/_icon.scss (Phase 3)
// 3. Always use $icon-circle-* tokens from 01-settings/_tokens-typography.scss
// 4. Icon size = 45% of container (responsive to circle size)
// 5. Supports 6 color variants: primary, secondary, coral, premium, sage, info
//
// VERSION HISTORY:
// 2.0.0 (2025-11-19) - ITCSS Phase 2: Extracted from systems/_icon-system.scss
// 1.0.0 (2025-11-17) - Initial icon system with v4.0 gradient circles
//
