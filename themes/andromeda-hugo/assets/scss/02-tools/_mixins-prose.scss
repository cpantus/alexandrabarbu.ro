// ==================================
// MIXINS: Prose / Markdown Content
// ==================================
//
// Purpose: Consistent styling for markdown-rendered content
// Use with any element that receives | markdownify output
//
// Usage:
//   .my-description {
//     @include prose;
//   }
//
// Version: 1.0.0
// Created: 2025-11-28
//

/// Prose mixin - styles all markdown inline and block elements
/// @param {Boolean} $compact [false] - Use tighter spacing for inline contexts
@mixin prose($compact: false) {
  // Inline elements - emphasis
  em, i {
    font-style: italic;
    color: var(--heading-accent-color, $color-secondary);
  }

  // Inline elements - strong
  strong, b {
    font-weight: $font-weight-semibold;
    color: $color-forest-700;
  }

  // Inline elements - strikethrough
  del, s {
    text-decoration: line-through;
    opacity: 0.7;
  }

  // Inline elements - code
  code:not(pre code) {
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.875em;
    color: $color-forest-700;
    background-color: rgba($color-forest-100, 0.5);
    padding: 0.1em 0.3em;
    border-radius: $border-radius-sm;
  }

  // Inline elements - mark/highlight
  mark {
    color: inherit;
    background-color: rgba($color-accent, 0.25);
    padding: 0.05em 0.15em;
    border-radius: 2px;
  }

  // Links - exclude buttons, nav links, footer links, and other styled components
  a:not(.c-button):not(.btn):not([class*="btn-"]):not(.c-nav__link):not(.c-footer__link):not(.c-footer-nav__link):not(.c-footer-info__logo-link):not([class*="c-social"]):not([class*="c-assessment"]) {
    color: $color-forest-500;
    text-decoration: underline;
    text-decoration-color: $color-sage-300;
    text-underline-offset: 2px;
    transition: color $duration-fast $easing-default,
                text-decoration-color $duration-fast $easing-default;

    &:hover {
      color: $color-sage-600;
      text-decoration-color: $color-sage-600;
    }
  }

  // Block elements - only if not compact
  @if not $compact {
    // Unordered lists
    ul {
      margin: $space-3 0;
      padding-left: $space-5;
      list-style-type: disc;

      li {
        margin-bottom: $space-2;
        padding-left: $space-1;

        &::marker {
          color: $color-sage-500;
        }
      }

      // Nested lists
      ul {
        margin: $space-2 0;
        list-style-type: circle;
      }
    }

    // Ordered lists
    ol {
      margin: $space-3 0;
      padding-left: $space-5;
      list-style-type: decimal;

      li {
        margin-bottom: $space-2;
        padding-left: $space-1;

        &::marker {
          color: $color-sage-500;
          font-weight: $font-weight-medium;
        }
      }

      // Nested lists
      ol {
        margin: $space-2 0;
        list-style-type: lower-alpha;
      }
    }

    // Paragraphs
    p {
      margin-bottom: $space-3;

      &:last-child {
        margin-bottom: 0;
      }
    }

    // Blockquotes
    blockquote {
      margin: $space-4 0;
      padding: $space-3 $space-4;
      border-left: 3px solid $color-sage-400;
      background-color: rgba($color-sage-50, 0.5);
      font-style: italic;
      color: $color-text-secondary;

      p:last-child {
        margin-bottom: 0;
      }
    }

    // Horizontal rules
    hr {
      margin: $space-6 0;
      border: none;
      border-top: 1px solid $color-border-redesign-light;
    }
  }
}

/// Prose inline-only mixin - for contexts where only inline markdown is expected
/// (headings, single-line descriptions, etc.)
@mixin prose-inline {
  @include prose($compact: true);
}
