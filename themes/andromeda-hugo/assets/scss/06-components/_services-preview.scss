// ==================================
// Services Preview Section - BEM Component (Redesign 2025)
// ==================================
//
// Purpose: 3-service card grid for homepage and services main page
// Features: Redesign 2025 - heavy rounding, icon blobs, cream palette
// Breakpoints: 1 col mobile, 2 col tablet, 3 col desktop
//
// Version: 3.0.0 - Redesign 2025
// Updated: 2025-11-23
//

// ============================================================================
// BLOCK: Services Preview Section
// ============================================================================

.c-services-preview {
  padding: 0; // Reset padding for bi-color sections
  position: relative;
  overflow: visible; // Allow badge to overflow at border

  // Bi-color background design
  // Top section: Dark forest green gradient
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%; // Top 50% dark green (adjusted for badge positioning)
    background: linear-gradient(180deg, $forest-700 0%, $forest-600 100%); // Dark forest gradient
    z-index: 0;
  }

  // Bottom section: Cream background (natural background)
  background: $cream-50;
}

// ============================================================================
// ELEMENT: Bottom Link (Below Intro)
// ============================================================================

.c-services-preview__bottom-link {
  margin-top: $space-4; // 16px top margin from intro (reduced from 32px for tighter spacing)
  position: relative;
  z-index: 1;
  text-align: center; // Center the inline-block link
}

.c-services-preview__bottom-link-text {
  font-family: $font-body; // DM Sans
  font-size: $font-size-sm; // ~14px
  font-weight: $weight-medium;
  color: $cream-100; // Cream text on dark background
  text-decoration: none;
  letter-spacing: 0.05em; // Wide tracking
  transition: color $transition-fast;
  display: inline-block;
  position: relative;
  padding-bottom: $space-3; // 12px padding below text for underline spacing

  // Gold underline - always visible
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: $gold-500; // Gold underline (#C5A880)
    transition: background $transition-fast,
                height $transition-fast;
  }

  &:hover {
    color: $gold-500; // Gold hover (#C5A880)
    text-decoration: none;
  }
}

// ============================================================================
// ELEMENT: Header
// ============================================================================

.c-services-preview__header {
  max-width: 700px; // Centered intro text max-width
  margin: 0 auto; // Centered horizontally, no bottom margin (controlled by intro)
  text-align: center;
  position: relative;
  z-index: 1;
  padding-top: $space-16; // Regular padding (64px)
  padding-bottom: $space-12; // 48px bottom padding to move content up

  @media (max-width: $breakpoint-md-max) {
    padding-top: $space-12; // 48px on mobile
    padding-bottom: $space-8; // 32px on mobile
  }
}

// Section badge pill - positioned at border between dark/light sections
.c-services-preview__badge {
  position: absolute;
  left: 50%;
  top: 50%; // Position at exactly 50% (border between sections)
  transform: translate(-50%, -50%); // Center the pill on the border
  z-index: 10; // Above both background sections

  display: inline-block;
  padding: $space-3 $space-6; // 12px 24px - adjusted for 2.25rem text
  background: rgba($cream-50, 0.95); // Almost white pill background with subtle transparency
  color: $forest-600; // Dark green text
  font-family: $font-heading; // Playfair Display serif
  font-size: 2.25rem; // 36px as per new spec
  font-style: italic;
  font-weight: $font-weight-normal; // Regular weight as per design spec
  letter-spacing: 0.02em; // Adjusted tracking for larger serif font
  border-radius: $radius-full; // Pill shape
  box-shadow: 0 4px 16px rgba($forest-900, 0.15); // Deeper shadow for larger element

  @media (max-width: $breakpoint-md-max) {
    font-size: 1.5rem; // 24px on mobile
    padding: $space-2 $space-5; // 8px 20px on mobile
  }
}

.c-services-preview__title {
  font-family: $font-heading; // Playfair Display serif
  font-size: 3.75rem !important; // 60px (60px = 3.75rem) - !important needed to override h2.c-heading
  font-weight: $font-weight-normal; // Regular weight as per design spec
  color: $cream-50; // Cream text on dark background
  margin-bottom: $space-6; // 24px to intro
  line-height: $leading-tight;
  padding-top: 100px; // 100px top padding to move title down

  @media (max-width: $breakpoint-md-max) {
    font-size: $font-size-4xl !important; // ~36px mobile - !important needed to override h2.c-heading
    padding-top: $space-12; // 48px on mobile
  }
}

// Intro paragraph (optional)
.c-services-preview__intro {
  font-family: $font-body; // DM Sans
  font-size: $font-size-lg; // ~18px
  color: rgba($cream-100, 0.9); // Cream text with slight transparency
  line-height: $leading-relaxed; // 1.625
  margin: 0 0 $space-6 0; // 24px bottom margin (reduced from 64px for tighter spacing)

  @media (max-width: $breakpoint-md-max) {
    margin-bottom: $space-4; // 16px on mobile
  }
}

// ============================================================================
// ELEMENT: Services Grid
// ============================================================================

.c-services-preview__grid {
  display: grid;
  grid-template-columns: 1fr; // Mobile: 1 column
  gap: $space-8 $space-8; // 40px vertical, 32px horizontal
  position: relative;
  z-index: 1;
  padding-top: 300px; // 300px top padding (reduced from 400px for tighter spacing)
  padding-bottom: 40px; // 40px bottom padding

  @media (max-width: $breakpoint-md-max) {
    padding-top: $space-12; // 48px on mobile
    padding-bottom: $space-12; // 48px on mobile
  }

  // Tablet: 2 columns
  @media (min-width: $breakpoint-md) and (max-width: $breakpoint-lg-max) {
    grid-template-columns: repeat(2, 1fr);
  }

  // Desktop: 3 columns (Redesign 2025 spec)
  @media (min-width: 992px) {
    grid-template-columns: repeat(3, 1fr);
    gap: $space-10 $space-8; // 40px vertical, 32px horizontal
  }
}

// ============================================================================
// ELEMENT: Service Card
// ============================================================================

.c-services-preview__card {
  background: $cream-50; // White (#FFFFFF)
  border: 1px solid $cream-200; // Very subtle cream border (#E9EFEC)
  border-radius: $radius-2xl; // Heavy rounding (32px / 2rem)
  padding: $space-10; // 40px padding
  text-align: center;
  transition: transform $transition-normal,
              box-shadow $transition-normal,
              border-color $transition-normal;
  box-shadow: $shadow-sm;
  position: relative;
  display: flex; // Flexbox for footer positioning
  flex-direction: column; // Stack content vertically

  // Hover effect (Redesign 2025 spec)
  &:hover {
    transform: translateY(-2px); // Slight lift
    box-shadow: $shadow-2xl; // Deeper shadow
    border-color: rgba($gold-500, 0.3); // Gold accent border at 30% opacity
  }

  // Mobile: adjust padding
  @media (max-width: $breakpoint-md-max) {
    padding: $space-8; // 32px on mobile
  }
}

// ============================================================================
// ELEMENT: Icon Blob
// ============================================================================

.c-services-preview__icon-blob {
  margin: 0 auto $space-6; // 24px below icon blob

  // Hover effect (inherit from card)
  .c-services-preview__card:hover & {
    transform: scale(1.05);
  }
}

// ============================================================================
// ELEMENT: Card Title
// ============================================================================

.c-services-preview__card-title {
  font-family: $font-heading; // Playfair Display serif
  font-size: $font-size-2xl; // ~24px
  font-weight: $weight-semibold; // 600
  color: $text-primary-green; // Dark green (#1A332A)
  margin: 0 auto $space-4 auto; // 16px bottom, centered horizontally
  line-height: $leading-tight;
  position: relative;
  display: inline-block;
  transition: color $transition-fast;
  width: fit-content; // Shrink to text width
  max-width: 100%; // Don't overflow container

  // Gold underline on hover - proportional to text width
  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%; // Width matches text width (inline-block container)
    height: 2px;
    background: $gold-500; // Gold underline (#C5A880)
    transform: scaleX(0);
    transform-origin: left;
    transition: transform $transition-normal;
  }

  .c-services-preview__card:hover & {
    &::after {
      transform: scaleX(1);
    }
  }
}

// ============================================================================
// ELEMENT: Description
// ============================================================================

.c-services-preview__description {
  font-family: $font-body; // DM Sans
  font-size: $font-size-base; // ~16px
  color: $text-muted-green; // Muted green-grey (#587065)
  line-height: $leading-relaxed; // 1.625 (1.6 from spec)
  margin: 0 0 $space-6 0; // 24px margin-bottom for footer spacing
}

// ============================================================================
// ELEMENT: Card Footer
// ============================================================================

.c-services-preview__card-footer {
  margin-top: auto; // Push to bottom of card
  padding-top: $space-4; // 16px top spacing
  border-top: 1px solid $cream-200; // Subtle divider
}

.c-services-preview__cta-link {
  font-family: $font-body; // DM Sans
  font-size: $font-size-sm; // ~14px
  font-weight: $weight-semibold;
  color: $forest-500; // Dark green
  text-decoration: none;
  letter-spacing: 0.05em; // Wide tracking
  transition: color $transition-fast;
  display: inline-block;

  &:hover {
    color: $gold-500; // Gold hover (#C5A880)
    text-decoration: none;
  }
}

// ============================================================================
// ELEMENT: Section-Level CTA
// ============================================================================

.c-services-preview__section-cta {
  margin-top: $space-12; // 48px above section CTA
  position: relative;
  z-index: 1;
}

// ============================================================================
// ACCESSIBILITY
// ============================================================================

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .c-services-preview__card {
    transition: none;

    &:hover {
      transform: none;
    }
  }

  .c-services-preview__icon-blob {
    .c-services-preview__card:hover & {
      transform: none;
    }
  }
}

// Focus styles for keyboard navigation (handled by button atoms)
