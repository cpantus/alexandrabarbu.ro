// ==================================
// BUTTON COMPONENT - BEM Architecture
// ==================================
//
// Purpose: Reusable button component with gradient effects
// Features: Primary/secondary variants, outline variants, size modifiers
//
// Last Updated: 2025-11-19 (Phase 3 - Component BEM Refactoring)
// Version: 1.0.0 (ITCSS + BEM)
//
// BEM Structure:
// Block: .c-button
// Modifiers: --primary, --secondary, --outline-primary, --outline-secondary, --sm, --lg
//

/*------------------------------------------------------------------
  # Base Button Block
-------------------------------------------------------------------*/

/**
 * Base button component
 * Provides foundation styling for all button variants
 * REDESIGN 2025: Pill-shaped buttons with forest/sage/gold colors
 */
.c-button {
  font-family: var(--btn-font-family);
  font-weight: var(--btn-font-weight);
  border-radius: var(--btn-border-radius);  // REDESIGN: Pill shape
  padding: var(--btn-padding-y) var(--btn-padding-x);
  transition: var(--btn-transition);
  border: 0;
  position: relative;
  overflow: hidden;
  display: inline-block;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  line-height: 1.5;
  min-height: var(--btn-min-height);  // REDESIGN: Ensure touch target compliance
  min-width: var(--btn-min-width);

  // Hover lift effect (subtle elevation with scale)
  // REDESIGN: Reduced translateY to -1px (was -2px)
  &:hover {
    transform: translateY(-1px) scale(1.02);
    text-decoration: none;
  }

  // Active press effect
  &:active {
    transform: translateY(0) scale(1);
  }

  // Focus state for accessibility - enhanced focus ring with persistent glow
  // REDESIGN: Using sage-500 for focus ring (was emerald-500)
  &:focus,
  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--btn-focus-ring-color);
    animation: focus-ring 0.3s ease-in-out;
  }

  @keyframes focus-ring {
    0% {
      box-shadow: 0 0 0 0 transparent;
    }
    50% {
      box-shadow: 0 0 0 6px var(--btn-focus-ring-color);
    }
    100% {
      box-shadow: 0 0 0 3px var(--btn-focus-ring-color);
    }
  }

  // Disabled state - reduced saturation and opacity
  &:disabled,
  &[disabled],
  &[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    filter: saturate(0.5);

    &:hover {
      transform: none;
    }
  }
}

/*------------------------------------------------------------------
  # Loading State Modifier
-------------------------------------------------------------------*/

/**
 * Button loading state - shows spinner and prevents interaction
 */
.c-button--loading {
  position: relative;
  cursor: wait;
  opacity: 0.8;

  &:hover {
    transform: none;
  }

  .c-button__spinner {
    display: inline-block;
    animation: none; // Prevent button animation from affecting spinner
  }

  .c-button__text {
    opacity: 0.7;
  }
}

/*------------------------------------------------------------------
  # Button Variant Modifiers
-------------------------------------------------------------------*/

/**
 * Primary button - forest green (redesign main CTA color)
 * REDESIGN 2025: Dark green background, sage green hover
 */
.c-button--primary {
  background: var(--btn-primary-bg);  // Dark green (#234E3E)
  color: var(--btn-primary-text);
  box-shadow: var(--btn-primary-shadow);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-primary-hover);  // Sage green hover (#6B9080)
    box-shadow: var(--btn-primary-shadow-lg);
    color: var(--btn-primary-text);
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-primary-bg);
    box-shadow: var(--btn-primary-shadow);
  }
}

/**
 * Secondary button - gold/sand accent (redesign warm CTA)
 * REDESIGN 2025: Gold background with darker gold hover
 */
.c-button--secondary {
  background: var(--btn-secondary-bg);  // Gold/sand (#C5A880)
  color: var(--btn-secondary-text);  // Dark green text for contrast
  box-shadow: var(--btn-secondary-shadow);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-secondary-hover);  // Darker gold (#B0936B approximate)
    box-shadow: var(--btn-secondary-shadow-lg);
    color: var(--btn-secondary-text);
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-secondary-bg);
    box-shadow: var(--btn-secondary-shadow);
  }
}

/**
 * Outline primary button - elegant forest green border
 * REDESIGN 2025: Forest green outline with filled hover
 */
.c-button--outline-primary {
  color: var(--btn-outline-primary-text);
  border: 2px solid var(--btn-outline-primary-border);
  background-color: transparent;
  box-shadow: none;

  &:hover,
  &:active,
  &:focus {
    color: var(--btn-outline-primary-hover-text);
    border-color: var(--btn-outline-primary-border);
    background: var(--btn-outline-primary-hover-bg);
    box-shadow: var(--btn-primary-shadow);
  }

  &:disabled,
  &[disabled] {
    color: var(--btn-outline-primary-text);
    border-color: var(--btn-outline-primary-border);
    background-color: transparent;
    box-shadow: none;
  }
}

/**
 * Outline secondary button - forest green border (accessibility fix)
 * REDESIGN 2025: Forest green outline with sage hover for better contrast
 * NOTE: Changed from sage to forest green for WCAG AA compliance (sage 3.29:1 vs forest 8.73:1)
 */
.c-button--outline-secondary {
  color: var(--btn-outline-secondary-text);  // Forest green for better contrast (8.73:1)
  border: 2px solid var(--btn-outline-secondary-border);
  background-color: transparent;
  box-shadow: none;

  &:hover,
  &:active,
  &:focus {
    color: var(--btn-outline-secondary-hover-text);
    border-color: var(--btn-outline-secondary-hover-bg);
    background: var(--btn-outline-secondary-hover-bg);  // Sage green hover (OK for filled state)
    box-shadow: var(--btn-outline-secondary-shadow-hover);
  }

  &:disabled,
  &[disabled] {
    color: var(--btn-outline-secondary-text);
    border-color: var(--btn-outline-secondary-border);
    background-color: transparent;
    box-shadow: none;
  }
}

/**
 * Outline redesign button - dark green with gold hover
 * REDESIGN 2025: Dark green text/border with gold color on hover
 */
.c-button--outline-redesign {
  color: var(--btn-outline-redesign-text);
  border: 2px solid var(--btn-outline-redesign-border);
  background-color: transparent;
  box-shadow: none;

  &:hover,
  &:active,
  &:focus {
    color: var(--btn-outline-redesign-hover-color);
    border-color: var(--btn-outline-redesign-hover-color);
    background-color: transparent;
    box-shadow: none;
  }

  &:disabled,
  &[disabled] {
    color: var(--btn-outline-redesign-text);
    border-color: var(--btn-outline-redesign-border);
    background-color: transparent;
    box-shadow: none;
    opacity: 0.5;
  }
}

/**
 * Tertiary button - calm navy blue
 */
.c-button--tertiary {
  background: var(--btn-tertiary-gradient);
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-tertiary-gradient-hover);
    box-shadow: var(--shadow-md);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-tertiary-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/**
 * Success button - positive green
 */
.c-button--success {
  background: var(--btn-success-gradient);
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-success-gradient-hover);
    box-shadow: var(--shadow-md);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-success-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/**
 * Warning button - attention amber
 */
.c-button--warning {
  background: var(--btn-warning-gradient);
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-warning-gradient-hover);
    box-shadow: var(--shadow-md);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-warning-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/**
 * Error button - critical red
 */
.c-button--error {
  background: var(--btn-error-gradient);
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-error-gradient-hover);
    box-shadow: var(--shadow-md);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-error-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/**
 * Info button - informational teal
 */
.c-button--info {
  background: var(--btn-info-gradient);
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-info-gradient-hover);
    box-shadow: var(--shadow-md);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-info-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/**
 * Neutral button - subtle gray
 */
.c-button--neutral {
  background: var(--btn-neutral-gradient);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-sm);

  &:hover,
  &:active,
  &:focus {
    background: var(--btn-neutral-gradient-hover);
    box-shadow: var(--shadow-md);
    color: var(--color-text-heading);
  }

  &:disabled,
  &[disabled] {
    background: var(--btn-neutral-gradient);
    box-shadow: var(--shadow-sm);
  }
}

/*------------------------------------------------------------------
  # Button Size Modifiers
-------------------------------------------------------------------*/

/**
 * Small button modifier
 */
.c-button--sm {
  padding: var(--spacing-xs) var(--spacing-md);
  font-size: var(--font-size-sm);
}

/**
 * Large button modifier
 */
.c-button--lg {
  padding: var(--spacing-md) var(--spacing-xl);
  font-size: var(--font-size-lg);
}

/*------------------------------------------------------------------
  # Accessibility: Touch Targets (WCAG 2.1 AAA)
-------------------------------------------------------------------*/

/**
 * Minimum 48px touch targets on mobile (enhanced from 44px)
 */
@media (max-width: 768px) {
  .c-button {
    min-height: 48px;
    min-width: 48px;
    padding: 0.875rem 1.5rem;
  }

  // Adjust small button for touch target compliance
  .c-button--sm {
    min-height: 48px;
    min-width: 48px;
    padding: 0.625rem 1.125rem; // Still smaller, but meets enhanced target
  }
}

/*------------------------------------------------------------------
  # Icon Animations
-------------------------------------------------------------------*/

/**
 * Slide-right icon animation on hover
 */
.c-button:hover {
  [data-icon-animate="slide-right"] {
    animation: icon-slide-right var(--transition-base);
  }
}

@keyframes icon-slide-right {
  0%,
  100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(4px);
  }
}

/*------------------------------------------------------------------
  # Reduced Motion Support
-------------------------------------------------------------------*/

/**
 * Respect user's reduced motion preference
 */
@media (prefers-reduced-motion: reduce) {
  .c-button {
    transition: none;

    &:hover {
      transform: none;
    }

    &:active {
      transform: none;
    }
  }
}

/*------------------------------------------------------------------
  # Legacy Class Compatibility (Phase 3 Transition)
  # TODO: Remove in Phase 4 after HTML templates updated
-------------------------------------------------------------------*/

// Base compatibility
.btn {
  @extend .c-button;
}

// Variant compatibility
.btn-primary {
  @extend .c-button;
  @extend .c-button--primary;
}

.btn-secondary {
  @extend .c-button;
  @extend .c-button--secondary;
}

.btn-outline-primary {
  @extend .c-button;
  @extend .c-button--outline-primary;
}

.btn-outline-secondary {
  @extend .c-button;
  @extend .c-button--outline-secondary;
}

// New variant compatibility (Phase 2)
.btn-tertiary {
  @extend .c-button;
  @extend .c-button--tertiary;
}

.btn-success {
  @extend .c-button;
  @extend .c-button--success;
}

.btn-warning {
  @extend .c-button;
  @extend .c-button--warning;
}

.btn-error {
  @extend .c-button;
  @extend .c-button--error;
}

.btn-info {
  @extend .c-button;
  @extend .c-button--info;
}

.btn-neutral {
  @extend .c-button;
  @extend .c-button--neutral;
}

// Size compatibility
.btn-sm {
  @extend .c-button--sm;
}

.btn-lg {
  @extend .c-button--lg;
}

// ==================================
// USAGE GUIDE
// ==================================
//
// Basic button:
//   <a href="#" class="c-button c-button--primary">Click Me</a>
//   <button class="c-button c-button--primary">Click Me</button>
//
// Outline button:
//   <a href="#" class="c-button c-button--outline-primary">Learn More</a>
//
// Size modifiers:
//   <a href="#" class="c-button c-button--primary c-button--sm">Small</a>
//   <a href="#" class="c-button c-button--primary c-button--lg">Large</a>
//
// Disabled button:
//   <button class="c-button c-button--primary" disabled>Disabled</button>
//
// In Hugo templates (via atoms/button.html):
//   {{ partial "atoms/button.html" (dict
//     "text" "Click Me"
//     "url" "#"
//     "variant" "primary"
//     "size" "lg"
//   ) }}
//
// Multiple buttons:
//   <div class="button-group">
//     <a href="#" class="c-button c-button--primary">Primary</a>
//     <a href="#" class="c-button c-button--outline-primary">Secondary</a>
//   </div>
//
// VERSION HISTORY:
// 1.0.0 (2025-11-19) - ITCSS Phase 3: Extracted from custom.scss with BEM naming + legacy compatibility
//
