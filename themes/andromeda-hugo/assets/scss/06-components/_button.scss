// ==================================
// BUTTON COMPONENT - BEM Architecture
// ==================================
//
// Purpose: Reusable button component with gradient effects
// Features: Primary/secondary variants, outline variants, size modifiers
//
// Last Updated: 2025-11-19 (Phase 3 - Component BEM Refactoring)
// Version: 1.0.0 (ITCSS + BEM)
//
// BEM Structure:
// Block: .c-button
// Modifiers: --primary, --secondary, --outline-primary, --outline-secondary, --sm, --lg
//

/*------------------------------------------------------------------
  # Base Button Block
-------------------------------------------------------------------*/

/**
 * Base button component
 * Provides foundation styling for all button variants
 * REDESIGN 2025: Pill-shaped buttons with forest/sage/gold colors
 */
.c-button {
  font-family: $font-body;
  font-weight: $button-font-weight;
  border-radius: $radius-full;  // REDESIGN: Pill shape (was $button-border-radius)
  padding: $button-padding-y $button-padding-x;
  transition: $button-transition;
  border: 0;
  position: relative;
  overflow: hidden;
  display: inline-block;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  line-height: 1.5;
  min-height: 44px;  // REDESIGN: Ensure touch target compliance
  min-width: 44px;

  // Hover lift effect (subtle elevation with scale)
  // REDESIGN: Reduced translateY to -1px (was -2px)
  &:hover {
    transform: translateY(-1px) scale(1.02);
    text-decoration: none;
  }

  // Active press effect
  &:active {
    transform: translateY(0) scale(1);
  }

  // Focus state for accessibility - enhanced focus ring with persistent glow
  // REDESIGN: Using sage-500 for focus ring (was emerald-500)
  &:focus,
  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba($sage-500, 0.15);
    animation: focus-ring 0.3s ease-in-out;
  }

  @keyframes focus-ring {
    0% {
      box-shadow: 0 0 0 0 rgba($sage-500, 0);
    }
    50% {
      box-shadow: 0 0 0 6px rgba($sage-500, 0.25);
    }
    100% {
      box-shadow: 0 0 0 3px rgba($sage-500, 0.15);
    }
  }

  // Disabled state - reduced saturation and opacity
  &:disabled,
  &[disabled],
  &[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    filter: saturate(0.5);

    &:hover {
      transform: none;
    }
  }
}

/*------------------------------------------------------------------
  # Loading State Modifier
-------------------------------------------------------------------*/

/**
 * Button loading state - shows spinner and prevents interaction
 */
.c-button--loading {
  position: relative;
  cursor: wait;
  opacity: 0.8;

  &:hover {
    transform: none;
  }

  .c-button__spinner {
    display: inline-block;
    animation: none; // Prevent button animation from affecting spinner
  }

  .c-button__text {
    opacity: 0.7;
  }
}

/*------------------------------------------------------------------
  # Button Variant Modifiers
-------------------------------------------------------------------*/

/**
 * Primary button - forest green (redesign main CTA color)
 * REDESIGN 2025: Dark green background, sage green hover
 */
.c-button--primary {
  background: $forest-500;  // Dark green (#234E3E)
  color: white;
  box-shadow: $shadow-primary-redesign;

  &:hover,
  &:active,
  &:focus {
    background: $sage-500;  // Sage green hover (#6B9080)
    box-shadow: $shadow-primary-lg-redesign;
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: $forest-500;
    box-shadow: $shadow-primary-redesign;
  }
}

/**
 * Secondary button - gold/sand accent (redesign warm CTA)
 * REDESIGN 2025: Gold background with darker gold hover
 */
.c-button--secondary {
  background: $gold-500;  // Gold/sand (#C5A880)
  color: $forest-700;  // Dark green text for contrast
  box-shadow: 0 10px 30px -5px rgba($gold-500, 0.2);

  &:hover,
  &:active,
  &:focus {
    background: darken($gold-500, 8%);  // Darker gold (#B0936B approximate)
    box-shadow: 0 20px 40px -8px rgba($gold-500, 0.3);
    color: $forest-700;
  }

  &:disabled,
  &[disabled] {
    background: $gold-500;
    box-shadow: 0 10px 30px -5px rgba($gold-500, 0.2);
  }
}

/**
 * Outline primary button - elegant forest green border
 * REDESIGN 2025: Forest green outline with filled hover
 */
.c-button--outline-primary {
  color: $forest-500;
  border: 2px solid $forest-500;
  background-color: transparent;
  box-shadow: none;

  &:hover,
  &:active,
  &:focus {
    color: white;
    border-color: $forest-500;
    background: $forest-500;
    box-shadow: $shadow-primary-redesign;
  }

  &:disabled,
  &[disabled] {
    color: $forest-500;
    border-color: $forest-500;
    background-color: transparent;
    box-shadow: none;
  }
}

/**
 * Outline secondary button - elegant sage green border
 * REDESIGN 2025: Sage green outline with filled hover
 */
.c-button--outline-secondary {
  color: $sage-500;
  border: 2px solid $sage-500;
  background-color: transparent;
  box-shadow: none;

  &:hover,
  &:active,
  &:focus {
    color: white;
    border-color: $sage-500;
    background: $sage-500;
    box-shadow: 0 10px 30px -5px rgba($sage-500, 0.2);
  }

  &:disabled,
  &[disabled] {
    color: $sage-500;
    border-color: $sage-500;
    background-color: transparent;
    box-shadow: none;
  }
}

/**
 * Tertiary button - calm navy blue
 */
.c-button--tertiary {
  background: linear-gradient(135deg, lighten($color-tertiary, 5%), darken($color-tertiary, 5%));
  color: white;
  box-shadow: 0 2px 8px rgba($color-tertiary, 0.25);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-tertiary, 8%), darken($color-tertiary, 2%));
    box-shadow: 0 4px 12px rgba($color-tertiary, 0.35);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-tertiary, 5%), darken($color-tertiary, 5%));
    box-shadow: 0 2px 8px rgba($color-tertiary, 0.25);
  }
}

/**
 * Success button - positive green
 */
.c-button--success {
  background: linear-gradient(135deg, lighten($color-success, 5%), darken($color-success, 5%));
  color: white;
  box-shadow: 0 2px 8px rgba($color-success, 0.25);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-success, 8%), darken($color-success, 2%));
    box-shadow: 0 4px 12px rgba($color-success, 0.35);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-success, 5%), darken($color-success, 5%));
    box-shadow: 0 2px 8px rgba($color-success, 0.25);
  }
}

/**
 * Warning button - attention amber
 */
.c-button--warning {
  background: linear-gradient(135deg, lighten($color-warning, 5%), darken($color-warning, 5%));
  color: white;
  box-shadow: 0 2px 8px rgba($color-warning, 0.25);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-warning, 8%), darken($color-warning, 2%));
    box-shadow: 0 4px 12px rgba($color-warning, 0.35);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-warning, 5%), darken($color-warning, 5%));
    box-shadow: 0 2px 8px rgba($color-warning, 0.25);
  }
}

/**
 * Error button - critical red
 */
.c-button--error {
  background: linear-gradient(135deg, lighten($color-error, 5%), darken($color-error, 5%));
  color: white;
  box-shadow: 0 2px 8px rgba($color-error, 0.25);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-error, 8%), darken($color-error, 2%));
    box-shadow: 0 4px 12px rgba($color-error, 0.35);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-error, 5%), darken($color-error, 5%));
    box-shadow: 0 2px 8px rgba($color-error, 0.25);
  }
}

/**
 * Info button - informational teal
 */
.c-button--info {
  background: linear-gradient(135deg, lighten($color-info, 5%), darken($color-info, 5%));
  color: white;
  box-shadow: 0 2px 8px rgba($color-info, 0.25);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-info, 8%), darken($color-info, 2%));
    box-shadow: 0 4px 12px rgba($color-info, 0.35);
    color: white;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-info, 5%), darken($color-info, 5%));
    box-shadow: 0 2px 8px rgba($color-info, 0.25);
  }
}

/**
 * Neutral button - subtle gray
 */
.c-button--neutral {
  background: linear-gradient(135deg, lighten($color-neutral, 15%), lighten($color-neutral, 5%));
  color: $gray-800;
  box-shadow: 0 2px 8px rgba($color-neutral, 0.2);

  &:hover,
  &:active,
  &:focus {
    background: linear-gradient(135deg, lighten($color-neutral, 18%), lighten($color-neutral, 8%));
    box-shadow: 0 4px 12px rgba($color-neutral, 0.3);
    color: $gray-900;
  }

  &:disabled,
  &[disabled] {
    background: linear-gradient(135deg, lighten($color-neutral, 15%), lighten($color-neutral, 5%));
    box-shadow: 0 2px 8px rgba($color-neutral, 0.2);
  }
}

/*------------------------------------------------------------------
  # Button Size Modifiers
-------------------------------------------------------------------*/

/**
 * Small button modifier
 */
.c-button--sm {
  padding: $space-2 $space-4;
  font-size: $text-sm;
}

/**
 * Large button modifier
 */
.c-button--lg {
  padding: $space-4 $space-8;
  font-size: $text-lg;
}

/*------------------------------------------------------------------
  # Accessibility: Touch Targets (WCAG 2.1 AAA)
-------------------------------------------------------------------*/

/**
 * Minimum 48px touch targets on mobile (enhanced from 44px)
 */
@media (max-width: 768px) {
  .c-button {
    min-height: 48px;
    min-width: 48px;
    padding: 0.875rem 1.5rem;
  }

  // Adjust small button for touch target compliance
  .c-button--sm {
    min-height: 48px;
    min-width: 48px;
    padding: 0.625rem 1.125rem; // Still smaller, but meets enhanced target
  }
}

/*------------------------------------------------------------------
  # Icon Animations
-------------------------------------------------------------------*/

/**
 * Slide-right icon animation on hover
 */
.c-button:hover {
  [data-icon-animate="slide-right"] {
    animation: icon-slide-right $duration-base $ease-in-out;
  }
}

@keyframes icon-slide-right {
  0%,
  100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(4px);
  }
}

/*------------------------------------------------------------------
  # Reduced Motion Support
-------------------------------------------------------------------*/

/**
 * Respect user's reduced motion preference
 */
@media (prefers-reduced-motion: reduce) {
  .c-button {
    transition: none;

    &:hover {
      transform: none;
    }

    &:active {
      transform: none;
    }
  }
}

/*------------------------------------------------------------------
  # Legacy Class Compatibility (Phase 3 Transition)
  # TODO: Remove in Phase 4 after HTML templates updated
-------------------------------------------------------------------*/

// Base compatibility
.btn {
  @extend .c-button;
}

// Variant compatibility
.btn-primary {
  @extend .c-button;
  @extend .c-button--primary;
}

.btn-secondary {
  @extend .c-button;
  @extend .c-button--secondary;
}

.btn-outline-primary {
  @extend .c-button;
  @extend .c-button--outline-primary;
}

.btn-outline-secondary {
  @extend .c-button;
  @extend .c-button--outline-secondary;
}

// New variant compatibility (Phase 2)
.btn-tertiary {
  @extend .c-button;
  @extend .c-button--tertiary;
}

.btn-success {
  @extend .c-button;
  @extend .c-button--success;
}

.btn-warning {
  @extend .c-button;
  @extend .c-button--warning;
}

.btn-error {
  @extend .c-button;
  @extend .c-button--error;
}

.btn-info {
  @extend .c-button;
  @extend .c-button--info;
}

.btn-neutral {
  @extend .c-button;
  @extend .c-button--neutral;
}

// Size compatibility
.btn-sm {
  @extend .c-button--sm;
}

.btn-lg {
  @extend .c-button--lg;
}

// ==================================
// USAGE GUIDE
// ==================================
//
// Basic button:
//   <a href="#" class="c-button c-button--primary">Click Me</a>
//   <button class="c-button c-button--primary">Click Me</button>
//
// Outline button:
//   <a href="#" class="c-button c-button--outline-primary">Learn More</a>
//
// Size modifiers:
//   <a href="#" class="c-button c-button--primary c-button--sm">Small</a>
//   <a href="#" class="c-button c-button--primary c-button--lg">Large</a>
//
// Disabled button:
//   <button class="c-button c-button--primary" disabled>Disabled</button>
//
// In Hugo templates (via atoms/button.html):
//   {{ partial "atoms/button.html" (dict
//     "text" "Click Me"
//     "url" "#"
//     "variant" "primary"
//     "size" "lg"
//   ) }}
//
// Multiple buttons:
//   <div class="button-group">
//     <a href="#" class="c-button c-button--primary">Primary</a>
//     <a href="#" class="c-button c-button--outline-primary">Secondary</a>
//   </div>
//
// VERSION HISTORY:
// 1.0.0 (2025-11-19) - ITCSS Phase 3: Extracted from custom.scss with BEM naming + legacy compatibility
//
