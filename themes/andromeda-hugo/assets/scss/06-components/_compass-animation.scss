// ==================================
// COMPASS ANIMATION ATOM - Redesign 2025
// ==================================
//
// Purpose: Decorative SVG compass matching reference design exactly
// Features: Minimal circles, right-angled triangle needle, dots & ticks
//
// Created: 2025-11-23 (Theme Redesign 2025)
// Updated: 2025-11-24 (Complete redesign to match reference image)
// Version: 3.0.0
//
// BEM Structure:
// Block: .c-compass-animation
// Elements: __svg, __ring, __needle, __needle-triangle, __direction
// Modifiers: --outer, --second, --third, --inner, --north, --opposite
//

/*------------------------------------------------------------------
  # Base Component
-------------------------------------------------------------------*/

.c-compass-animation {
  position: relative;
  width: 100%;
  max-width: 450px; // Slightly smaller for cleaner look
  margin: 0 auto;

  // Clean, light background matching reference
  background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
  border-radius: 50%;
  padding: 20px;

  @media (max-width: $breakpoint-md) {
    max-width: 320px;
    padding: 15px;
  }

  @media (max-width: $breakpoint-sm) {
    max-width: 260px;
    padding: 10px;
  }
}

.c-compass-animation__svg {
  width: 100%;
  height: auto;
  display: block;
}

/*------------------------------------------------------------------
  # Rings (Subtle rotation animations)
-------------------------------------------------------------------*/

.c-compass-animation__ring {
  transform-origin: center;
  animation-timing-function: linear;
  animation-iteration-count: infinite;

  // Outer ring with tick marks - very slow rotation
  &--outer {
    animation: rotateClockwiseSlow 60s linear infinite;
  }

  // Second ring - slow counter-clockwise
  &--second {
    animation: rotateCounterClockwiseSlow 50s linear infinite;
  }

  // Third ring - medium speed
  &--third {
    animation: rotateClockwise 40s linear infinite;
  }

  // Inner ring with dots - faster rotation
  &--inner {
    animation: rotateCounterClockwise 25s linear infinite;
  }
}

/*------------------------------------------------------------------
  # Needle (Right-angled triangle with oscillation)
-------------------------------------------------------------------*/

.c-compass-animation__needle {
  transform-origin: 200px 200px; // Center pivot
  // Oscillate left-right around NORTH (0 degrees) by ~15 degrees
  animation: needleOscillateNorth 4s ease-in-out infinite;
}

.c-compass-animation__needle-rhombus {
  // The rhombus/diamond shape
  transition: opacity 0.3s ease;

  // North half (upper, dark green with golden tip)
  &--north {
    // Gradient applied inline
  }

  // South half (lower, light green/sage)
  &--south {
    // Light green color set inline
  }
}

/*------------------------------------------------------------------
  # Direction Label
-------------------------------------------------------------------*/

.c-compass-animation__direction {
  font-family: $font-heading; // Crimson Pro for elegance
  font-size: 20px;
  font-weight: 600; // Slightly lighter than bold
  letter-spacing: 0.1em;

  // North indicator in golden/tan matching reference
  &--north {
    fill: #C5A880; // Golden tan color
    opacity: 0.85;
  }
}

/*------------------------------------------------------------------
  # Animations
-------------------------------------------------------------------*/

// Slower rotations for more subtle effect
@keyframes rotateClockwiseSlow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes rotateClockwise {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes rotateCounterClockwiseSlow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(-360deg);
  }
}

@keyframes rotateCounterClockwise {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(-360deg);
  }
}

// Oscillation around NORTH (0 degrees) - left-right ~15 degrees
@keyframes needleOscillateNorth {
  0%, 100% {
    transform: rotate(-15deg); // 15 degrees to the left (west)
  }
  50% {
    transform: rotate(15deg); // 15 degrees to the right (east)
  }
}

/*------------------------------------------------------------------
  # Hover Effects
-------------------------------------------------------------------*/

// Removed hover effects to prevent animation choppiness
// The compass should animate smoothly and continuously without interruption

/*------------------------------------------------------------------
  # Accessibility
-------------------------------------------------------------------*/

// Reduced motion support - disable all animations
@media (prefers-reduced-motion: reduce) {
  .c-compass-animation__ring,
  .c-compass-animation__needle {
    animation: none;
  }

  // Set needle to static NORTH position
  .c-compass-animation__needle {
    transform: rotate(0deg);
  }
}

/*------------------------------------------------------------------
  # Print Styles
-------------------------------------------------------------------*/

@media print {
  .c-compass-animation {
    background: none;
    padding: 0;
  }

  .c-compass-animation__ring,
  .c-compass-animation__needle {
    animation: none;
  }
}