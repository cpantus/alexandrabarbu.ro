// =============================================================================
// HEADER ORGANISM (BEM)
// =============================================================================
//
// Header component with sticky navigation, glassmorphism backdrop, and responsive collapse
//
// BEM Structure:
// - Block: .c-header
// - Elements: __skip-link, __spacer, __container, __inner, __brand, __nav-controller,
//             __lang-mobile, __toggle, __toggle-icon, __collapse, __nav, __actions,
//             __lang-desktop, __cta
// - Modifiers: --sticky (applied on scroll via JS)
//
// Features:
// - Fixed positioning with glassmorphism backdrop on scroll
// - Responsive collapse (mobile < 992px, desktop >= 992px)
// - Smooth transitions for sticky state
// - Mobile hamburger animation (menu â†” X)
// - 8pt spacing grid throughout
// - Playfair Display + DM Sans typography (Redesign 2025)
//
// Accessibility:
// - Skip-to-content link for keyboard navigation
// - ARIA labels and expanded states
// - Focus indicators (box-shadow + outline)
// - Reduced motion support
// - High contrast mode support
//
// Dependencies:
// - Design tokens: _tokens-colors.scss, _tokens-spacing.scss, _tokens-typography.scss,
//                  _tokens-shadows.scss, _tokens-motion.scss
//
// Version: 5.0.1 (Phase 4 - Organism Refactor)
// Last Updated: 2025-11-20
// =============================================================================

// Skip to Content Link (WCAG 2.1 AA)
// =============================================================================
.c-header__skip-link {
  position: fixed;
  top: -100px;
  left: $space-2;
  z-index: 9999;
  padding: $space-2 $space-3;
  background-color: $color-primary-600;
  color: $color-white;
  font-family: $font-family-sans;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  text-decoration: none;
  border-radius: $border-radius-md;
  box-shadow: $shadow-lg;
  transition: top $duration-fast $easing-default;

  &:focus,
  &:focus-visible {
    top: $space-2;
    outline: none;
    animation: skipLinkFocusGlow 0.3s ease-in-out;
  }

  @keyframes skipLinkFocusGlow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba($color-primary-300, 0);
    }
    50% {
      box-shadow: 0 0 0 4px rgba($color-primary-300, 0.4);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// Header Height Spacer
// =============================================================================
.c-header__spacer {
  height: 80px;

  @media (max-width: $breakpoint-md - 1) {
    height: 64px;
  }
}

// Main Header Block
// =============================================================================
.c-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: rgba($cream-50, 0.95); // Redesign 2025: Clean white/cream background
  border-bottom: 1px solid $cream-200; // Redesign 2025: Subtle cream border
  transition: all $duration-normal $easing-default;

  &--sticky {
    background: rgba($cream-50, 0.98); // Redesign 2025: Slightly more opaque on scroll
    backdrop-filter: blur(12px);
    box-shadow: $shadow-md;
    border-bottom: 1px solid $cream-300; // Redesign 2025: Slightly darker border on scroll
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }

  @media print {
    position: static;
    box-shadow: none;
    border-bottom: 1px solid $color-border-dark;
  }
}

.c-header__container {
  max-width: 1320px;
  margin: 0 auto;
  padding: 0 $space-4;

  @media (max-width: $breakpoint-md - 1) {
    padding: 0 $space-3;
  }
}

.c-header__inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 80px;
  gap: $space-4;

  @media (max-width: $breakpoint-lg - 1) {
    min-height: 64px;
    gap: $space-2;
  }
}

.c-header__brand {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  text-decoration: none;
  transition: opacity $duration-fast $easing-default;

  // Prevent any underlines on logo/brand link
  &,
  &:hover,
  &:focus,
  &:active,
  &::before,
  &::after {
    text-decoration: none !important;
    border-bottom: none !important;
  }

  &:hover,
  &:focus {
    opacity: 0.85;
  }

  &:focus-visible {
    outline: none;
    animation: brandFocusGlow 0.3s ease-in-out;
  }

  @keyframes brandFocusGlow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba($color-primary-600, 0);
    }
    50% {
      box-shadow: 0 0 0 4px rgba($color-primary-600, 0.3);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

.c-header__nav-controller {
  display: flex;
  align-items: center;
  gap: $space-2;

  @media (min-width: $breakpoint-lg) {
    display: none;
  }
}

.c-header__lang-mobile {
  display: block;

  @media (min-width: $breakpoint-lg) {
    display: none;
  }
}

.c-header__toggle {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  padding: 0;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color $duration-fast $easing-default;

  &:hover {
    background-color: rgba($color-primary-600, 0.1);
    border-radius: $border-radius-md;
  }

  &:focus-visible {
    outline: none;
    animation: toggleFocusGlow 0.3s ease-in-out;
  }

  @keyframes toggleFocusGlow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba($color-primary-600, 0);
    }
    50% {
      box-shadow: 0 0 0 4px rgba($color-primary-600, 0.3);
    }
  }

  &[aria-expanded="true"] {
    .c-header__toggle-icon--open {
      opacity: 0;
      transform: rotate(90deg);
    }

    .c-header__toggle-icon--close {
      opacity: 1;
      transform: rotate(0deg);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    transition: background-color 0s;

    .c-header__toggle-icon {
      transition: none;
    }
  }

  @media (max-width: $breakpoint-md - 1) {
    min-width: 44px;
    min-height: 44px;
  }
}

.c-header__toggle-icon {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity $duration-normal $easing-default, transform $duration-normal $easing-default;

  &--open {
    opacity: 1;
    transform: rotate(0deg);
  }

  &--close {
    opacity: 0;
    transform: rotate(-90deg);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
    transform: none !important;
  }
}

.c-header__collapse {
  display: flex;
  align-items: center;
  gap: $space-6;
  flex-grow: 1;

  @media (max-width: $breakpoint-lg - 1) {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    flex-direction: column;
    align-items: stretch;
    gap: 0;
    background-color: $color-white;
    border-bottom: 1px solid $color-border-light;
    box-shadow: $shadow-md;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height $duration-normal $easing-default, opacity $duration-normal $easing-default;

    &.show {
      max-height: 100vh;
      opacity: 1;
      padding: $space-4 0;
    }

    @media (prefers-reduced-motion: reduce) {
      transition: none;
    }
  }

  @media (min-width: $breakpoint-lg) {
    position: static;
    max-height: none;
    opacity: 1;
    padding: 0;
    background: transparent;
    border: none;
    box-shadow: none;
  }

  @media print {
    display: none;
  }
}

.c-header__nav {
  flex-grow: 1;

  @media (max-width: $breakpoint-lg - 1) {
    padding: 0 $space-4;
    border-bottom: 1px solid $color-border-light;
  }

  @media (min-width: $breakpoint-lg) {
    padding: 0;
    border: none;
  }
}

.c-header__actions {
  display: flex;
  align-items: center;
  gap: $space-4;

  @media (max-width: $breakpoint-lg - 1) {
    flex-direction: column;
    align-items: stretch;
    gap: $space-3;
    padding: $space-4 $space-4 0;
  }

  @media (min-width: $breakpoint-lg) {
    flex-direction: row;
    padding: 0;
  }
}

.c-header__lang-desktop {
  display: none;

  @media (min-width: $breakpoint-lg) {
    display: block;
  }
}

.c-header__cta {
  display: flex;
  align-items: center;
  justify-content: center;

  @media (max-width: $breakpoint-lg - 1) {
    width: 100%;

    .c-button {
      width: 100%;
      justify-content: center;
    }
  }
}

// =============================================================================
// LEGACY COMPATIBILITY
// =============================================================================
.header-nav {
  @extend .c-header;
}

.header-height-fix {
  @extend .c-header__spacer;
}

.skip-to-content {
  @extend .c-header__skip-link;
}

.visually-hidden-focusable {
  @extend .c-header__skip-link;
}

// Header Logo Customization (Redesign 2025)
// =============================================================================
// Override logo colors specifically in the header context
// - Text elements: Dark teal/gray (#374A51)
// - Icon element: Emerald (brand primary color)
// - Footer logo remains unchanged (uses default colors)
// =============================================================================

.c-header {
  .c-logo--primary {
    // Override the fill="currentColor" attribute on SVG groups
    .c-logo__text-gasim,
    .c-logo__text-alexandra,
    .c-logo__text-barbu {
      fill: #374A51 !important; // Darker teal/gray for text

      path {
        fill: #374A51 !important;
      }
    }

    .c-logo__icon {
      fill: $color-primary !important; // Keep leaf icon emerald

      path {
        fill: $color-primary !important;
      }
    }
  }
}

// =============================================================================
// END HEADER ORGANISM
// =============================================================================
