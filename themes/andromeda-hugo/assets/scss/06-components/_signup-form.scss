/*
  Signup Form Enhanced Section - BEM Component

  Modern BEM architecture with legacy compatibility
  Part of Phase 3 ITCSS refactoring (Session 18)

  Features:
  - Glassmorphism card with enhanced backdrop blur
  - Step indicator with gradient progress
  - Multi-step form support
  - Active/completed state animations
  - Responsive layout (mobile-first)
  - v4.0 design enhancements

  Usage:
  <section class="c-signup-form">
    <div class="container">
      <div class="c-signup-form__card">
        <div class="c-signup-form__steps">
          <div class="c-signup-form__step c-signup-form__step--active">
            <span class="c-signup-form__step-number">1</span>
            <span class="c-signup-form__step-label">Step 1</span>
          </div>
        </div>
        <form class="c-signup-form__form">...</form>
      </div>
    </div>
  </section>
*/

/* ============================================
   SECTION CONTAINER
   ============================================ */

.c-signup-form {
  padding: $space-12 0;
  position: relative;

  /* Compact modifier for reduced padding */
  &--compact {
    padding: $space-8 0;
  }

  /* Responsive padding adjustments */
  @media (max-width: 767px) {
    padding: $space-8 0;

    &--compact {
      padding: $space-6 0;
    }
  }
}

/* ============================================
   CARD CONTAINER
   ============================================ */

.c-signup-form__card {
  background: var(--signup-form-card-bg);
  backdrop-filter: var(--signup-form-card-backdrop);
  border: var(--signup-form-card-border);
  border-radius: var(--signup-form-card-border-radius);
  padding: var(--signup-form-card-padding);
  box-shadow: var(--signup-form-card-shadow);
  max-width: var(--signup-form-card-max-width);
  margin: 0 auto;

  /* Responsive padding */
  @media (max-width: 767px) {
    padding: var(--signup-form-card-padding-tablet);
    border-radius: var(--signup-form-card-border-radius-mobile);
  }

  @media (max-width: 575px) {
    padding: var(--signup-form-card-padding-mobile);
  }
}

/* ============================================
   STEP INDICATOR
   ============================================ */

.c-signup-form__steps {
  display: flex;
  justify-content: space-between;
  margin-bottom: $space-8;
  position: relative;

  /* Responsive margin */
  @media (max-width: 767px) {
    margin-bottom: $space-6;
  }
}

.c-signup-form__step {
  flex: 1;
  text-align: center;
  position: relative;
  z-index: 1;

  /* Connecting line between steps */
  &::after {
    content: '';
    position: absolute;
    top: var(--signup-step-line-top);
    left: 50%;
    width: 100%;
    height: var(--signup-step-line-height);
    background: var(--signup-step-line-bg);
    z-index: -1;
    transition: background 0.3s ease;
  }

  /* Hide line after last step */
  &:last-child::after {
    display: none;
  }

  /* Active step state */
  &--active {
    .c-signup-form__step-number {
      background: var(--signup-step-active-bg);
      color: var(--signup-step-active-color);
      border-color: transparent;
      box-shadow: var(--signup-step-active-shadow);
      transform: var(--signup-step-active-transform);
    }

    .c-signup-form__step-label {
      color: var(--signup-step-active-label-color);
      font-weight: var(--signup-step-active-label-weight);
    }
  }

  /* Completed step state */
  &--completed {
    .c-signup-form__step-number {
      background: var(--signup-step-completed-bg);
      color: var(--signup-step-completed-color);
      border-color: transparent;

      /* Checkmark icon for completed */
      &::before {
        content: 'âœ“';
        font-size: 18px;
        font-weight: bold;
      }
    }

    .c-signup-form__step-label {
      color: var(--signup-step-completed-label-color);
    }

    /* Green connecting line for completed steps */
    &::after {
      background: var(--signup-step-completed-line-bg);
    }
  }

  /* Disabled/upcoming step state */
  &--disabled {
    opacity: 0.5;
    pointer-events: none;
  }
}

.c-signup-form__step-number {
  width: var(--signup-step-number-size);
  height: var(--signup-step-number-size);
  border: var(--signup-step-number-border);
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--signup-step-number-bg);
  font-weight: var(--signup-step-number-font-weight);
  font-size: $text-base;
  margin-bottom: var(--signup-step-number-margin-bottom);
  transition: all 0.3s ease;
  color: var(--signup-step-number-color);

  /* Responsive sizing */
  @media (max-width: 575px) {
    width: var(--signup-step-number-size-mobile);
    height: var(--signup-step-number-size-mobile);
    font-size: $text-sm;
  }
}

.c-signup-form__step-label {
  display: block;
  font-size: var(--signup-step-label-font-size);
  color: var(--signup-step-label-color);
  transition: color 0.3s ease, font-weight 0.3s ease;

  /* Responsive font size */
  @media (max-width: 767px) {
    font-size: var(--signup-step-label-font-size-tablet);
  }

  @media (max-width: 575px) {
    display: none; /* Hide labels on very small screens */
  }
}

/* ============================================
   FORM CONTENT
   ============================================ */

.c-signup-form__form {
  /* Form elements inherit from _form.scss component */
  /* This section primarily handles layout */
}

.c-signup-form__title {
  font-size: var(--signup-form-title-font-size);
  font-weight: var(--signup-form-title-font-weight);
  color: var(--signup-form-title-color);
  margin-bottom: var(--signup-form-title-margin-bottom);
  text-align: center;

  @media (max-width: 767px) {
    font-size: var(--signup-form-title-font-size-tablet);
  }
}

.c-signup-form__description {
  font-size: var(--signup-form-description-font-size);
  color: var(--signup-form-description-color);
  text-align: center;
  margin-bottom: var(--signup-form-description-margin-bottom);
  line-height: var(--signup-form-description-line-height);

  @media (max-width: 767px) {
    font-size: var(--signup-form-description-font-size-tablet);
    margin-bottom: var(--signup-form-description-margin-bottom-tablet);
  }
}

/* ============================================
   FORM ACTIONS
   ============================================ */

.c-signup-form__actions {
  display: flex;
  gap: var(--signup-action-gap);
  justify-content: space-between;
  margin-top: $space-6;

  /* Responsive layout - stack on mobile */
  @media (max-width: 575px) {
    flex-direction: column;
    gap: var(--signup-action-gap-mobile);
  }
}

.c-signup-form__action-button {
  flex: 1;
  padding: var(--signup-action-button-padding);
  border-radius: var(--signup-action-button-border-radius);
  font-weight: var(--signup-action-button-font-weight);
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;

  /* Primary button (Next, Submit) */
  &--primary {
    background: var(--signup-action-primary-bg);
    color: var(--signup-action-primary-color);
    box-shadow: var(--signup-action-primary-shadow);

    &:hover {
      transform: var(--signup-action-primary-transform-hover);
      box-shadow: var(--signup-action-primary-shadow-hover);
    }
  }

  /* Secondary button (Back, Cancel) */
  &--secondary {
    background: var(--signup-action-secondary-bg);
    color: var(--signup-action-secondary-color);
    border: var(--signup-action-secondary-border);

    &:hover {
      background: var(--signup-action-secondary-bg-hover);
      border-color: var(--signup-action-secondary-border-hover);
    }
  }

  /* Disabled state */
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
  }

  /* Responsive sizing */
  @media (max-width: 575px) {
    padding: var(--signup-action-button-padding-mobile);
    font-size: var(--signup-action-button-font-size-mobile);
  }
}

/* ============================================
   PROGRESS BAR (optional enhancement)
   ============================================ */

.c-signup-form__progress {
  width: 100%;
  height: var(--signup-progress-height);
  background: var(--signup-progress-bg);
  border-radius: var(--signup-progress-border-radius);
  margin-bottom: $space-6;
  overflow: hidden;

  @media (max-width: 767px) {
    margin-bottom: $space-5;
  }
}

.c-signup-form__progress-bar {
  height: 100%;
  background: var(--signup-progress-bar-bg);
  border-radius: var(--signup-progress-border-radius);
  transition: var(--signup-progress-bar-transition);
  width: 0%;

  /* Width set dynamically via JS or inline style */
  &[data-progress="33"] {
    width: 33.33%;
  }

  &[data-progress="66"] {
    width: 66.66%;
  }

  &[data-progress="100"] {
    width: 100%;
  }
}

/* ============================================
   LEGACY COMPATIBILITY
   ============================================ */

/* Section wrapper */
.signup-section {
  @extend .c-signup-form;
}

/* Card */
.signup-card {
  @extend .c-signup-form__card;
}

/* Step indicator */
.step-indicator {
  @extend .c-signup-form__steps;
}

/* Step */
.step-indicator .step {
  @extend .c-signup-form__step;

  &.active {
    @extend .c-signup-form__step--active;
  }

  &.completed {
    @extend .c-signup-form__step--completed;
  }
}

/* Step number */
.step-number {
  @extend .c-signup-form__step-number;
}

/* Step label */
.step-label {
  @extend .c-signup-form__step-label;
}
