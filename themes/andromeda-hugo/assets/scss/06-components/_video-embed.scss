// =============================================================================
// Video Embed Component (BEM)
// =============================================================================
// Version: 1.0.0
// Description: Video player with thumbnail, play button, and modal playback
// Dependencies: 01-settings (tokens), atoms/icon, atoms/image
// BEM Block: .c-video
//
// Structure:
//   .c-video                     - Block (wrapper)
//   .c-video--16-9              - Modifier: 16:9 aspect ratio (default)
//   .c-video--4-3               - Modifier: 4:3 aspect ratio
//   .c-video--1-1               - Modifier: 1:1 aspect ratio (square)
//   .c-video__wrapper           - Element: aspect ratio container
//   .c-video__button            - Element: play button
//   .c-video__thumbnail         - Element: video thumbnail image
//   .c-video__placeholder       - Element: placeholder when no thumbnail
//   .c-video__modal             - Element: hidden modal for playback
//   .c-video__player            - Element: video player element
// =============================================================================

// -----------------------------------------------------------------------------
// Block: Video container
// -----------------------------------------------------------------------------
.c-video {
  // Layout
  display: block;
  width: 100%;
  position: relative;
  overflow: hidden;

  // Visual
  border-radius: $border-radius-lg; // Rounded corners
}

// -----------------------------------------------------------------------------
// Element: Wrapper (aspect ratio container)
// -----------------------------------------------------------------------------
.c-video__wrapper {
  // Layout
  position: relative;
  width: 100%;

  // Aspect ratio (default 16:9)
  aspect-ratio: 16 / 9;

  // Visual
  background-color: $color-neutral-900; // Dark background
  overflow: hidden;
}

// -----------------------------------------------------------------------------
// Element: Play button
// -----------------------------------------------------------------------------
.c-video__button {
  // Position
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;

  // Size (8pt grid)
  width: $space-12; // 96px (12 Ã— 8pt)
  height: $space-12;

  // Visual
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: $border-radius-circle;
  background-color: rgba($color-primary, 0.9);
  backdrop-filter: blur(8px); // Glassmorphism
  box-shadow: $shadow-lg;
  transition: all $transition-normal $easing-ease-out;

  // Typography
  color: $color-white;
  cursor: pointer;

  // States: Hover
  &:hover {
    background-color: rgba($color-primary, 1);
    transform: translate(-50%, -50%) scale(1.1);
    box-shadow: $shadow-xl;
  }

  // States: Focus
  &:focus {
    outline: 2px solid $color-white;
    outline-offset: 4px;
  }

  // States: Active
  &:active {
    transform: translate(-50%, -50%) scale(1.05);
  }

  // Responsive: Mobile
  @media (max-width: $breakpoint-md - 1) {
    width: $space-10; // 80px on mobile
    height: $space-10;
  }
}

// -----------------------------------------------------------------------------
// Element: Thumbnail
// -----------------------------------------------------------------------------
.c-video__thumbnail {
  // Layout
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;

  // Visual
  object-fit: cover;
  display: block;
}

// -----------------------------------------------------------------------------
// Element: Placeholder (when no thumbnail)
// -----------------------------------------------------------------------------
.c-video__placeholder {
  // Layout
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;

  // Visual
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: $color-neutral-800;
  color: $color-neutral-400;
}

// -----------------------------------------------------------------------------
// Element: Modal (hidden, shown by JavaScript)
// -----------------------------------------------------------------------------
.c-video__modal {
  // Hidden by default (JavaScript controls visibility)
  display: none;

  // When shown by JS
  &.is-active {
    display: block;
  }
}

// -----------------------------------------------------------------------------
// Element: Video player
// -----------------------------------------------------------------------------
.c-video__player {
  // Layout
  width: 100%;
  height: 100%;
  display: block;

  // Visual
  background-color: $color-neutral-900;
}

// -----------------------------------------------------------------------------
// Modifier: Aspect ratio 16:9 (default, explicit for clarity)
// -----------------------------------------------------------------------------
.c-video--16-9 {
  .c-video__wrapper {
    aspect-ratio: 16 / 9;
  }
}

// -----------------------------------------------------------------------------
// Modifier: Aspect ratio 4:3
// -----------------------------------------------------------------------------
.c-video--4-3 {
  .c-video__wrapper {
    aspect-ratio: 4 / 3;
  }
}

// -----------------------------------------------------------------------------
// Modifier: Aspect ratio 1:1 (square)
// -----------------------------------------------------------------------------
.c-video--1-1 {
  .c-video__wrapper {
    aspect-ratio: 1 / 1;
  }
}

// -----------------------------------------------------------------------------
// Accessibility: Reduced motion
// -----------------------------------------------------------------------------
@media (prefers-reduced-motion: reduce) {
  .c-video__button {
    transition: none;

    &:hover {
      transform: translate(-50%, -50%);
    }

    &:active {
      transform: translate(-50%, -50%);
    }
  }
}

// -----------------------------------------------------------------------------
// Accessibility: High contrast mode
// -----------------------------------------------------------------------------
@media (prefers-contrast: high) {
  .c-video__button {
    &:focus {
      outline-width: 3px;
    }
  }
}

// -----------------------------------------------------------------------------
// Print styles
// -----------------------------------------------------------------------------
@media print {
  .c-video {
    display: none; // Hide videos in print
  }
}

// -----------------------------------------------------------------------------
// Backward Compatibility (Legacy classes via @extend)
// -----------------------------------------------------------------------------
// Support old class names for gradual migration
// TODO: Remove after all templates migrated to BEM classes

.video-block {
  @extend .c-video;

  // Legacy ratio classes
  &.ratio-16-9 {
    @extend .c-video--16-9;
  }

  &.ratio-4-3 {
    @extend .c-video--4-3;
  }

  &.ratio-1-1 {
    @extend .c-video--1-1;
  }

  .video-play-btn {
    @extend .c-video__button;
  }

  .video-thumb {
    @extend .c-video__thumbnail;
  }

  .video-thumb-placeholder {
    @extend .c-video__placeholder;
  }

  .video-modal {
    @extend .c-video__modal;
  }
}
