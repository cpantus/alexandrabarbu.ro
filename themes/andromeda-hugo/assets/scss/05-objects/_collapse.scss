// ==========================================================================
// Collapse Utilities - Object Layer
// ==========================================================================
//
// Purpose: Reusable collapse/expand animation utilities for vanilla-collapse.js
//          Uses modern CSS Grid for GPU-accelerated smooth animations (60fps)
//
// Classes:
//   .collapse - Hidden state (grid-template-rows: 0fr)
//   .collapse.show - Visible state (grid-template-rows: 1fr)
//
// Usage:
//   Works with vanilla-collapse.js for smooth accordion/dropdown animations
//   Apply to any collapsible content container
//
// Performance:
//   - GPU-accelerated via CSS Grid (grid-template-rows)
//   - will-change hint for optimal browser preparation
//   - cubic-bezier(0.4, 0, 0.2, 1) for smooth Material Design easing
//   - 60fps animation (vs 30fps with max-height)
//
// Dependencies:
//   - 01-settings/_tokens-motion.scss (transition timing)
//   - vanilla-collapse.js (JavaScript controller)
//
// ITCSS Layer: Objects (layout primitives, no cosmetics)
//
// Version: 3.0.0 (Performance Update - CSS Grid)
// Created: 2025-11-21
// Updated: 2025-11-24 (Fixed choppy animation issue)
// ==========================================================================

// Collapse elements - accordion/FAQ only, not navigation
// Modern CSS Grid approach for smooth GPU-accelerated animations
.c-accordion__panel.collapse,
.c-service-faq__answer.collapse,
.c-methods-used__method-content.collapse,
.accordion-collapse.collapse {
  display: grid;
  grid-template-rows: 0fr;
  overflow: hidden;
  transition: grid-template-rows 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: grid-template-rows;

  // Inner wrapper for grid animation
  > * {
    min-height: 0; // Required for grid-template-rows animation
    overflow: hidden; // Ensure content is clipped when collapsed
  }

  // When shown, content is visible
  &.show {
    grid-template-rows: 1fr;
    overflow: hidden; // Keep hidden during animation to prevent overlap

    > * {
      overflow: visible; // Allow content to display normally when expanded
    }
  }
}

// Reduced motion support (accessibility)
@media (prefers-reduced-motion: reduce) {
  .c-accordion__panel.collapse,
  .c-service-faq__answer.collapse,
  .c-methods-used__method-content.collapse,
  .accordion-collapse.collapse {
    transition: none;
  }
}

// ==========================================================================
// USAGE EXAMPLES
// ==========================================================================
//
// HTML Structure (required for grid animation):
//   <div class="collapse">
//     <div class="c-accordion__content">
//       Content here (must be single direct child)
//     </div>
//   </div>
//
// Initially expanded:
//   <div class="collapse show">
//     <div class="c-accordion__content">Content here</div>
//   </div>
//
// JavaScript handles state transitions:
//   1. User clicks trigger ([data-toggle="collapse"])
//   2. JS toggles "show" class on target element
//   3. CSS Grid animates from 0fr â†’ 1fr (or vice versa)
//   4. GPU-accelerated animation at 60fps
//
// Performance Notes:
//   - Old approach: max-height (causes layout reflows, ~30fps)
//   - New approach: grid-template-rows (GPU-accelerated, 60fps)
//   - Requires single direct child element (for grid container)
//
// See: themes/andromeda-hugo/assets/js/vanilla-collapse.js
// ==========================================================================
