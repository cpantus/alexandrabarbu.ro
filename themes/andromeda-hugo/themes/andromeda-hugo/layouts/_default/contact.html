{{ define "main" }}
  {{ partial "components/page-header.html" . }}


  <section class="section">
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div
          class="col-lg-5 col-md-8 text-center mb-5 mb-lg-0"
          data-aos="fade-up">
          <div class="pe-0 pe-lg-5">
            {{ partial "image.html" (dict "Src" .Params.contact_image "Alt" "contact image" "Size" "575x") }}
          </div>
        </div>
        {{ with site.Params.contact_form_action }}
          <div class="col-lg-5 col-md-10" data-aos="fade-up">
            <div class="contact-form">
              <div class="mb-4">
                {{ partial "atoms/heading.html" (dict "text" (T `send_a_message`) "level" 3) }}
              </div>
              <form id="contact-form" action="{{ . }}" method="POST">
                <p id="form-status" class="form-status"></p>
                {{ partial "molecules/form-field.html" (dict
                  "type" "text"
                  "name" (T `full_name`)
                  "id" "name"
                  "label" (T `full_name`)
                  "placeholder" (T `full_name`)
                  "required" true
                  "class" "mb-4"
                ) }}
                {{ partial "molecules/form-field.html" (dict
                  "type" "email"
                  "name" (T `email`)
                  "id" "email"
                  "label" (T `email`)
                  "placeholder" (T `email`)
                  "required" true
                  "class" "mb-4"
                ) }}
                {{ partial "molecules/form-field.html" (dict
                  "type" "textarea"
                  "name" "Comment"
                  "id" "message"
                  "label" (T `your_message`)
                  "rows" 4
                  "required" true
                  "class" "mb-4"
                ) }}

                {{ partial "atoms/button.html" (dict
                  "text" (T `send_message`)
                  "type" "submit"
                  "variant" "primary"
                  "fullWidth" true
                  "class" "mt-4"
                  "attributes" (dict "aria-label" "Send Message")
                ) }}
              </form>
            </div>
          </div>

      <script>
        var form = document.getElementById('contact-form');
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
              'Accept': 'application/json'
            }
          }).then(response => {
            status.innerHTML = "{{T `form_thanks_message`}}";
            form.reset()
          }).catch(error => {
            status.innerHTML = "{{T `form_error_message`}}";
          });
        }
        form.addEventListener("submit", handleSubmit)
      </script>
        {{ end }}
      </div>

      <div class="section pb-0">
        <div class="row justify-content-center">
          <div class="col-12">
            <div class="section-title text-center" data-aos="fade-up">
              <p class="text-uppercase">{{ T `contact_us` }}</p>
              {{ partial "atoms/heading.html" (dict "text" (T `get_in_touch`) "level" 2 "variant" "section") }}
            </div>
          </div>

          {{ with site.Params.contact_info.phone }}
            <div
              class="col-xl-3 col-lg-4 col-md-6 contact-widget"
              data-aos="fade-up">
              <div class="block text-center">
                {{ partial "atoms/heading.html" (dict "text" (T `phone`) "level" 3 "class" "mb-4") }}
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="tel:{{ . }}"
                          >{{ partial "atoms/icon.html" (dict "name" "phone" "prefix" "las") }}{{ . }}</a
                        >
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}

          {{ with site.Params.contact_info.email }}
            <div
              class="col-xl-3 col-lg-4 col-md-6 contact-widget"
              data-aos="fade-up"
              data-aos-delay="100">
              <div class="block text-center">
                {{ partial "atoms/heading.html" (dict "text" (T `email`) "level" 3 "class" "mb-4") }}
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="mailto:{{ . }}"
                          >{{ partial "atoms/icon.html" (dict "name" "envelope-open-text" "prefix" "las") }}{{ . }}</a
                        >
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}

          {{ with site.Params.social }}
            <div
              class="col-xl-3 col-lg-4 col-md-12 contact-widget"
              data-aos="fade-up"
              data-aos-delay="200">
              <div class="block text-center">
                {{ partial "atoms/heading.html" (dict "text" (T `social_media`) "level" 3 "class" "mb-4") }}
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="{{ .link }}"
                          ><i class="{{ .icon }}"></i>{{ .title }}</a
                        >
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </div>
  </section>
{{ end }}
