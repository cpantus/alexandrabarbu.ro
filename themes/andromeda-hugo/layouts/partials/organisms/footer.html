{{/*
  Footer Organism - BEM Refactored

  Main site footer composition using atomic design molecules

  Features:
  - Optional CTA section before footer
  - Logo and site info (footer-info molecule)
  - Social links and quick links (footer-nav molecule)
  - Copyright notice with legal links
  - 8pt spacing grid throughout

  BEM Structure:
  - Block: .c-footer
  - Elements: __cta, __cta-container, __cta-content, __cta-title, __cta-text,
              __cta-button, __main, __container, __divider, __content, __copyright,
              __copyright-container, __copyright-text
  - Modifiers: --with-cta (applied when CTA enabled)

  Usage:
    {{ partial "organisms/footer.html" . }}
    {{ partialCached "organisms/footer.html" . .Language }}  // With caching

  Dependencies:
  - molecules/footer-info.html (logo + description)
  - molecules/footer-nav.html (social links + quick links)
  - atoms/button.html (CTA button)
  - atoms/heading.html (CTA title)

  Accessibility:
  - Semantic HTML footer element
  - WCAG AA contrast
  - Keyboard navigation
  - Screen reader support

  Responsive:
  - Mobile (<768px): Stacked layout
  - Tablet (768-991px): 2-column grid
  - Desktop (>=992px): 3-column grid

  Version: 5.0.1 (Phase 4 - Organism Refactor)
  Last Updated: 2025-11-20
*/}}

{{- $currentLang := site.Language.Lang -}}
{{- $hasCTA := and site.Params.cta site.Params.cta.enable -}}

{{/* Optional CTA Section */}}
{{ if $hasCTA }}
<section class="c-footer__cta">
  <div class="c-footer__cta-container">
    <div class="c-footer__cta-content">
      {{ partial "atoms/heading.html" (dict
        "level" "h2"
        "text" site.Params.cta.title
        "variant" "gradient"
        "alignment" "center"
        "context" .
      ) }}
      <p class="c-footer__cta-text">{{ site.Params.cta.content | markdownify }}</p>
      <div class="c-footer__cta-button">
        {{ partial "atoms/button.html" (dict
          "text" site.Params.cta.button
          "url" site.Params.cta.button_link
          "variant" "primary"
          "size" "lg"
        ) }}
      </div>
    </div>
  </div>
</section>
{{ end }}

{{/* Main Footer */}}
<footer class="c-footer {{ if $hasCTA }}c-footer--with-cta{{ end }}">
  <div class="c-footer__main">
    <div class="c-footer__container">
      <div class="c-footer__divider"></div>
      <div class="c-footer__content">
        {{/* Column 1: Footer Info (Logo + Description + Contact) */}}
        {{ partial "molecules/footer-info.html" (dict) }}

        {{/* Column 2: Social Links & Email */}}
        <div class="c-footer-nav__section c-footer-nav__section--social">
          {{ partial "atoms/heading.html" (dict
            "text" (i18n "socials" | default "Social Media")
            "level" 4
            "variant" "primary"
            "class" "c-footer-nav__title"
          ) }}

          {{/* Email Link */}}
          {{ with site.Params.contact_info.email }}
            {{ range first 1 . }}
              {{ if . }}
                <div class="c-footer-nav__email">
                  <a href="mailto:{{ . }}" class="c-footer-nav__link">{{ . }}</a>
                </div>
              {{ end }}
            {{ end }}
          {{ end }}

          {{/* Social Media Links */}}
          <div class="c-footer-nav__social">
            {{ partial "molecules/social-links.html" (dict
              "variant" "primary"
              "layout" "inline"
              "class" "c-footer-nav__social-links"
            ) }}
          </div>
        </div>

        {{/* Column 3: Quick Links */}}
        <div class="c-footer-nav__section c-footer-nav__section--links">
          {{ partial "atoms/heading.html" (dict
            "text" (i18n "quick_links" | default "Link-uri Rapide")
            "level" 4
            "variant" "primary"
            "class" "c-footer-nav__title"
          ) }}

          {{/* Quick Links from Footer Menu */}}
          {{ if site.Menus.footer }}
            <ul class="c-footer-nav__links">
              {{ range site.Menus.footer }}
                <li class="c-footer-nav__item">
                  <a href="{{ .URL | relLangURL }}" class="c-footer-nav__link">
                    {{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</footer>

{{/* Copyright */}}
<div class="c-footer__copyright">
  <div class="c-footer__copyright-container">
    <p class="c-footer__copyright-text">{{ site.Params.copyright | markdownify }}</p>
  </div>
</div>
