{{/*
  Header Organism - BEM Refactored

  Main site header composition using atomic design molecules

  Features:
  - Skip-to-content link (WCAG 2.1 AA keyboard navigation)
  - Logo molecule with brand link
  - Primary navigation molecule
  - Language selector molecule (mobile + desktop variants)
  - Mobile menu toggle with icon atoms
  - Optional CTA button atom
  - Sticky header with glassmorphism backdrop
  - Responsive collapse behavior (vanilla-collapse.js)

  BEM Structure:
  - Block: .c-header
  - Elements: __container, __inner, __brand, __nav-controller, __toggle, __collapse, __nav, __actions, __cta
  - Modifiers: --sticky (applied on scroll via JS)

  Usage:
    {{ partial "organisms/header.html" . }}
    {{ partialCached "organisms/header.html" . .Language }}  // With caching

  Dependencies:
  - molecules/logo.html
  - molecules/language-selector.html (mobile + desktop variants)
  - molecules/navigation.html
  - atoms/icon.html (menu + x icons)
  - atoms/button.html (optional CTA)
  - vanilla-collapse.js (mobile menu toggle)

  Accessibility:
  - Skip-to-content link (keyboard users)
  - ARIA labels on toggle button
  - ARIA expanded state management
  - Semantic HTML nav element
  - Focus indicators on all interactive elements

  Responsive:
  - Mobile (< 992px): Collapsed menu with hamburger toggle
  - Desktop (>= 992px): Full navigation, desktop language selector visible

  Version: 5.0.1 (Phase 4 - Organism Refactor)
  Last Updated: 2025-11-20
*/}}

{{- $currentLang := site.Language.Lang -}}

<!-- Skip to Content Link (WCAG 2.1 AA - Keyboard Navigation) -->
<a href="#main-content" class="c-header__skip-link visually-hidden-focusable">
  {{- if eq $currentLang "ro" -}}
    Sari la conținut
  {{- else -}}
    Skip to main content
  {{- end -}}
</a>

<!-- Header Height Spacer (prevents content jump when header is fixed) -->
<div class="c-header__spacer"></div>

<!-- Main Header -->
<header class="c-header">
  <div class="c-header__container">
    <div class="c-header__inner">

      {{/* Logo Brand Link */}}
      <a class="c-header__brand" href="{{ site.BaseURL | relLangURL }}" aria-label="{{ if eq $currentLang "ro" }}Pagina principală{{ else }}Home page{{ end }}">
        {{ partial "molecules/logo.html" (dict "variant" "primary" "size" "md" "hasLink" false "context" .) }}
      </a>

      {{/* Navigation Controller (Mobile: Language Selector + Hamburger) */}}
      <div class="c-header__nav-controller">

        {{/* Mobile Language Selector */}}
        <div class="c-header__lang-mobile">
          {{ partial "molecules/language-selector.html" (dict "variant" "mobile" "context" .) }}
        </div>

        {{/* Mobile Menu Toggle Button */}}
        <button
          class="c-header__toggle"
          type="button"
          data-toggle="collapse"
          data-target="#headerNav"
          aria-controls="headerNav"
          aria-expanded="false"
          aria-label="{{ if eq $currentLang "ro" }}Comută navigarea{{ else }}Toggle navigation{{ end }}">
          {{/* Menu Icon (shown when menu closed) */}}
          <span class="c-header__toggle-icon c-header__toggle-icon--open">
            {{ partial "atoms/icon.html" (dict "icon" "las la-bars" "size" "lg" "variant" "primary") }}
          </span>
          {{/* Close Icon (shown when menu open) */}}
          <span class="c-header__toggle-icon c-header__toggle-icon--close">
            {{ partial "atoms/icon.html" (dict "icon" "las la-times" "size" "lg" "variant" "primary") }}
          </span>
        </button>
      </div>

      {{/* Collapsible Navigation Container */}}
      <div class="c-header__collapse" id="headerNav">

        {{/* Primary Navigation */}}
        <nav class="c-header__nav" aria-label="{{ if eq $currentLang "ro" }}Navigare principală{{ else }}Primary navigation{{ end }}">
          {{ partial "molecules/navigation.html" . }}
        </nav>

        {{/* Actions (Desktop Language Selector + Optional CTA) */}}
        <div class="c-header__actions">

          {{/* Desktop Language Selector */}}
          <div class="c-header__lang-desktop">
            {{ partial "molecules/language-selector.html" (dict "variant" "desktop" "context" .) }}
          </div>

          {{/* Optional CTA Button */}}
          {{ if site.Params.navigation_button.enable }}
            <div class="c-header__cta">
              {{ partial "atoms/button.html" (dict
                "text" site.Params.navigation_button.label
                "url" (site.Params.navigation_button.link | relURL)
                "variant" "primary"
                "size" "md"
              ) }}
            </div>
          {{ end }}
        </div>
      </div>

    </div>
  </div>
</header>
<!-- /Main Header -->
