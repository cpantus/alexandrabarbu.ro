{{/*
  Newsletter Signup Section

  Email subscription form with benefits list and lead magnet offer.
  Two-column layout with colored background.
  Layout: Left column (icon/title/description/benefits) + Right column (form)

  Front Matter Parameters:
  - .Params.newsletter_signup (object)
    - enable (bool, required): Enable/disable section
    - icon (string, optional): Icon name for left column
    - title (string, required): Main section heading
    - description (string, optional): Description text
    - benefits (array, optional): List of subscription benefits
    - form_action (string, optional): Form submission endpoint (default: #)
    - gdpr_text (string, optional): GDPR consent text (i18n fallback)
    - button_text (string, optional): Submit button text (i18n fallback)
    - button_variant (string, optional): Button color variant (default: secondary)
    - variant (string, optional): Section color variant (primary/secondary/tertiary/neutral, default: primary)

  BEM Structure:
  - .c-newsletter-section (section block)
  - .c-newsletter-section__container (container wrapper)
  - .c-newsletter-section__content (left column - content)
  - .c-newsletter-section__icon-wrapper (icon wrapper)
  - .c-newsletter-section__description (description text)
  - .c-newsletter-section__benefits (benefits list)
  - .c-newsletter-section__benefits-item (individual benefit)
  - .c-newsletter-section__form (right column - form wrapper)
  - .c-newsletter-section__form-element (form element)
  - .c-newsletter-section__gdpr (GDPR consent)

  Example Usage:
  ```yaml
  sections:
    - type: "newsletter-signup"

  newsletter_signup:
    enable: true
    icon: "envelope"
    title: "Subscribe to Our Newsletter"
    description: "Get weekly therapy tips, mindfulness exercises, and exclusive resources"
    benefits:
      - "Weekly therapy insights"
      - "Mindfulness exercises"
      - "Exclusive downloadable resources"
      - "Early access to workshops"
    form_action: "https://your-endpoint.com/subscribe"
    gdpr_text: "I agree to processing of personal data according to GDPR"
    button_text: "Subscribe Now"
    button_variant: "secondary"
    variant: "primary"
  ```

  Features:
  - Colored background section
  - Two-column responsive layout
  - Icon with gradient wrapper
  - Benefits list with check icons
  - GDPR consent checkbox
  - i18n support
  - Form-field molecule integration
  - Responsive (stacks on mobile)

  Created: 2025-11-20 (Phase 5 refactor)
  Version: 1.0.0 (BEM)
*/}}

{{- $section := .Params.newsletter_signup -}}

{{- with $section -}}
  {{- if .enable -}}
    {{- $variant := .variant | default "primary" -}}
    {{- $buttonVariant := .button_variant | default "secondary" -}}
    {{- $formAction := .form_action | default "#" -}}
    {{- $gdprText := .gdpr_text | default (i18n "gdpr_consent" | default "Sunt de acord cu prelucrarea datelor personale conform GDPR") -}}
    {{- $buttonText := .button_text | default (i18n "subscribe" | default "Abonează-te") -}}

    <section class="c-newsletter-section c-newsletter-section--{{ $variant }}">
      <div class="c-newsletter-section__container">
        {{/* Left Column: Content */}}
        <div class="c-newsletter-section__content">
          {{- if .icon -}}
            <div class="c-newsletter-section__icon-wrapper">
              {{ partial "atoms/icon.html" (dict
                "name" .icon
                "size" "3x"
                "variant" "white"
                "class" "c-newsletter-section__icon"
                "withWrapper" true
                "wrapperVariant" "secondary"
                "wrapperSize" "xl"
              ) }}
            </div>
          {{- end -}}

          {{- if .title -}}
            {{ partial "atoms/heading.html" (dict
              "text" (.title | markdownify)
              "level" "h3"
              "class" "c-newsletter-section__title"
              "variant" "white"
            ) }}
          {{- end -}}

          {{- if .description -}}
            <p class="c-newsletter-section__description">{{ .description | markdownify }}</p>
          {{- end -}}

          {{- with .benefits -}}
            <ul class="c-newsletter-section__benefits">
              {{- range . -}}
                <li class="c-newsletter-section__benefits-item">
                  {{ partial "atoms/icon.html" (dict
                    "name" "check-circle"
                    "variant" "white"
                    "class" "c-newsletter-section__benefits-icon"
                  ) }}
                  {{ . | markdownify }}
                </li>
              {{- end -}}
            </ul>
          {{- end -}}
        </div>

        {{/* Right Column: Form */}}
        <div class="c-newsletter-section__form">
          <form class="c-newsletter-section__form-element" action="{{ $formAction }}" method="POST">
            {{ partial "molecules/form-field.html" (dict
              "type" "text"
              "name" "name"
              "id" "newsletter-name"
              "placeholder" (i18n "your_name" | default "Numele tău")
              "required" true
              "variant" "white"
              "size" "lg"
              "class" "c-newsletter-section__field"
            ) }}

            {{ partial "molecules/form-field.html" (dict
              "type" "email"
              "name" "email"
              "id" "newsletter-email"
              "placeholder" (i18n "your_email" | default "Adresa ta de email")
              "required" true
              "variant" "white"
              "size" "lg"
              "class" "c-newsletter-section__field"
            ) }}

            <div class="c-newsletter-section__gdpr">
              <input
                class="c-newsletter-section__gdpr-checkbox"
                type="checkbox"
                id="gdprConsent"
                name="gdpr"
                required
              >
              <label class="c-newsletter-section__gdpr-label" for="gdprConsent">
                {{ $gdprText | markdownify }}
              </label>
            </div>

            {{ partial "atoms/button.html" (dict
              "type" "submit"
              "text" $buttonText
              "variant" $buttonVariant
              "size" "lg"
              "fullWidth" true
              "class" "c-newsletter-section__submit"
            ) }}
          </form>
        </div>
      </div>
    </section>
  {{- end -}}
{{- end -}}
