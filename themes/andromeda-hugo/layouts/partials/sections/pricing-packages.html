{{/*
  ============================================================================
  Pricing Packages Section - BEM Architecture
  ============================================================================
  Service-specific pricing tables with package tiers

  Features:
  - Pricing cards with tiers
  - Featured package highlighting
  - Package features lists
  - CTAs for each package
  - Payment methods info

  Data Structure:
  ---------------
  pricing_packages:
    title: "Rates & Packages"               # Section heading
    subtitle: "Investment in Your Wellbeing" # Optional eyebrow
    description: "Intro text..."            # Optional description
    packages:                                # Array of packages
      - name: "Starter Package"
        price: "400"
        currency: "lei"
        sessions: "4"
        featured: true                      # Optional highlight
        features:                            # Features list
          - "Initial assessment"
          - "3 active therapy sessions"
          - "Follow-up plan"
        button_text: "Get Started"
        button_url: "/contact/"
      - name: "Standard Package"
        price: "750"
        sessions: "8"
        features: [...]
    payment_methods: "Cash, card, bank transfer" # Optional
    note: "Reduced rates for students..."   # Optional footnote

  Parameters:
  -----------
  None - Data-driven from front matter

  Usage:
  ------
  ```yaml
  sections:
    - type: "pricing-packages"

  pricing_packages:
    title: "Tarife È™i Pachete"
    packages:
      - name: "Pachet Start"
        price: "400"
        currency: "lei"
        sessions: "4"
  ```

  BEM Structure:
  --------------
  .c-pricing-packages                 - Section wrapper
  .c-pricing-packages__header         - Header container
  .c-pricing-packages__subtitle       - Eyebrow text
  .c-pricing-packages__title          - Main heading
  .c-pricing-packages__description    - Intro text
  .c-pricing-packages__grid           - Packages grid
  .c-pricing-packages__package        - Individual package card
    .c-pricing-packages__package--featured - Featured modifier
  .c-pricing-packages__name           - Package name
  .c-pricing-packages__price          - Price display
  .c-pricing-packages__sessions       - Sessions count
  .c-pricing-packages__features       - Features list
  .c-pricing-packages__cta            - CTA button
  .c-pricing-packages__footer         - Payment methods / notes

  Dependencies:
  -------------
  - atoms/heading.html (title)
  - atoms/button.html (CTAs)
  - _pricing-packages.scss (BEM styles)

  Version: 1.0.0
  Updated: 2025-11-20
  ============================================================================
*/}}

{{- $data := .Params.pricing_packages -}}
{{- if not $data -}}
  {{- $data = site.Data.shared_sections.pricing_packages -}}
{{- end -}}

{{- if $data -}}
<section class="c-pricing-packages section">
  <div class="o-container">

    {{/* Section Header */}}
    {{- if or $data.title $data.subtitle $data.description -}}
    <div class="c-pricing-packages__header text-center">
      {{- if $data.subtitle -}}
        <p class="c-pricing-packages__subtitle text-uppercase">{{ $data.subtitle }}</p>
      {{- end -}}
      {{- if $data.title -}}
        {{ partial "atoms/heading.html" (dict
          "text" $data.title
          "level" 2
          "class" "c-pricing-packages__title"
        ) }}
      {{- end -}}
      {{- if $data.description -}}
        <p class="c-pricing-packages__description">{{ $data.description }}</p>
      {{- end -}}
    </div>
    {{- end -}}

    {{/* Packages Grid */}}
    {{- if $data.packages -}}
    <div class="c-pricing-packages__grid">
      {{- range $index, $package := $data.packages -}}
        <div class="c-pricing-packages__package{{ if $package.featured }} c-pricing-packages__package--featured{{ end }}" data-aos="fade-up" data-aos-delay="{{ mul $index 100 }}">

          {{/* Featured Badge */}}
          {{- if $package.featured -}}
            <div class="c-pricing-packages__badge">{{ i18n "popular" | default "Most Popular" }}</div>
          {{- end -}}

          {{/* Package Name */}}
          {{- if $package.name -}}
            <h3 class="c-pricing-packages__name">{{ $package.name }}</h3>
          {{- end -}}

          {{/* Price */}}
          {{- if $package.price -}}
            <div class="c-pricing-packages__price">
              <span class="c-pricing-packages__amount">{{ $package.price }}</span>
              {{- if $package.currency -}}
                <span class="c-pricing-packages__currency">{{ $package.currency }}</span>
              {{- end -}}
            </div>
          {{- end -}}

          {{/* Sessions Count */}}
          {{- if $package.sessions -}}
            <p class="c-pricing-packages__sessions">{{ $package.sessions }} {{ i18n "sessions" | default "sessions" }}</p>
          {{- end -}}

          {{/* Features List */}}
          {{- if $package.features -}}
            <ul class="c-pricing-packages__features">
              {{- range $package.features -}}
                <li class="c-pricing-packages__feature">
                  <i class="las la-check c-pricing-packages__check-icon"></i>
                  <span>{{ . }}</span>
                </li>
              {{- end -}}
            </ul>
          {{- end -}}

          {{/* CTA Button */}}
          {{- if $package.button_url -}}
            {{ partial "atoms/button.html" (dict
              "text" (default (i18n "get_started") $package.button_text)
              "url" ($package.button_url | relLangURL)
              "variant" (cond $package.featured "primary" "outline-primary")
              "class" "c-pricing-packages__cta"
            ) }}
          {{- end -}}

        </div>
      {{- end -}}
    </div>
    {{- end -}}

    {{/* Footer (Payment methods / Notes) */}}
    {{- if or $data.payment_methods $data.note -}}
    <div class="c-pricing-packages__footer text-center">
      {{- if $data.payment_methods -}}
        <p class="c-pricing-packages__payment-methods">
          <strong>{{ i18n "payment_methods" | default "Payment Methods" }}:</strong> {{ $data.payment_methods }}
        </p>
      {{- end -}}
      {{- if $data.note -}}
        <p class="c-pricing-packages__note">{{ $data.note }}</p>
      {{- end -}}
    </div>
    {{- end -}}

  </div>
</section>
{{- end -}}
