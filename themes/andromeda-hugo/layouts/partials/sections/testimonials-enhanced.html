{{/*
  Testimonials Enhanced Section - Dark Background Redesign 2025

  Usage:
    sections:
      - type: "testimonials-enhanced"

    testimonials_section:
      title: "What Clients Say"
      icon_color: "gold"
      testimonials:
        - quote: "Therapy helped me understand my patterns and build healthier relationships."
          name: "M.A."
          role: "Individual Therapy Client"
        - quote: "I learned tools to manage anxiety and found peace I didn't think was possible."
          name: "R.C."
          role: "CBT Program Participant"
        - quote: "The compassionate approach helped me heal from past trauma at my own pace."
          name: "S.L."
          role: "Trauma-Focused Therapy Client"

  Parameters:
    title (required) - Section title (cream color, serif, centered)
    icon_color (optional) - Icon color: "gold"|"sage" (default: "gold")
    testimonials (required) - Array of testimonial objects:
      - quote (required) - Testimonial text (cream, serif italic, ~18-20px)
      - name (required) - Client initials (cream, sans-serif, weight 600, uppercase)
      - role (optional) - Client role/context (cream 70% opacity, ~14px)

  Design Specs (Redesign 2025):
    - Background: Dark forest green (#2F5548)
    - Text: Cream/off-white (#F4F7F5)
    - Layout: 3-column grid (desktop), responsive stack
    - Avatar: 48px circles with initials
    - Quote: Serif italic, 18-20px, line-height 1.7
    - Gold decorative dividers above/below heading

  BEM Structure:
    .c-testimonials-dark              Block
    .c-testimonials-dark__icon        Element: section icon
    .c-testimonials-dark__divider     Element: decorative divider
    .c-testimonials-dark__header      Element: section header
    .c-testimonials-dark__grid        Element: testimonials grid
    .c-testimonials-dark__item        Element: single testimonial
    .c-testimonials-dark__avatar      Element: avatar circle
    .c-testimonials-dark__quote       Element: quote text
    .c-testimonials-dark__author      Element: author info

  Version: 3.0.0 (Redesign 2025)
  Last Updated: 2025-11-23
*/}}

{{- /* ========================================
     PARAMETER EXTRACTION & VALIDATION
     ======================================== */ -}}
{{- $section := .Params.testimonials_section -}}
{{- if not $section -}}
  {{- return -}}
{{- end -}}

{{- $title := $section.title | default "" -}}
{{- $iconColor := $section.icon_color | default "gold" -}}
{{- $testimonials := $section.testimonials | default slice -}}

{{- if not $testimonials -}}
  {{- return -}}
{{- end -}}

{{- /* ========================================
     SECTION ID & BEM CLASSES
     ======================================== */ -}}
{{- $blockClass := "c-testimonials-dark" -}}

{{- /* ========================================
     SECTION MARKUP
     ======================================== */ -}}
<section class="{{ $blockClass }}">
  <div class="o-container">

    {{- /* ========================================
         SECTION HEADER with Icon and Decorative Dividers
         ======================================== */ -}}
    {{- if $title -}}
    <div class="c-testimonials-dark__header">
      {{- /* Gold/Sand Icon (quote marks) */ -}}
      <div class="c-testimonials-dark__icon c-testimonials-dark__icon--{{ $iconColor }}">
        <i class="las la-quote-left"></i>
      </div>

      {{- /* Top Decorative Divider */ -}}
      <div class="c-testimonials-dark__divider"></div>

      {{- /* Section Title */ -}}
      {{ partial "atoms/heading.html" (dict
        "text" $title
        "level" 2
        "class" "c-testimonials-dark__title"
      ) }}

      {{- /* Bottom Decorative Divider */ -}}
      <div class="c-testimonials-dark__divider"></div>
    </div>
    {{- end -}}

    {{- /* ========================================
         TESTIMONIALS GRID (3 columns)
         ======================================== */ -}}
    <div class="c-testimonials-dark__grid">
      {{- range $testimonial := $testimonials -}}
        <div class="c-testimonials-dark__item">
          {{- /* Avatar Circle with Initials */ -}}
          {{- if $testimonial.name -}}
            {{- $initials := substr $testimonial.name 0 2 -}}
            <div class="c-testimonials-dark__avatar">
              <span>{{ $initials }}</span>
            </div>
          {{- end -}}

          {{- /* Quote Text */ -}}
          {{- if $testimonial.quote -}}
            <blockquote class="c-testimonials-dark__quote">
              "{{ $testimonial.quote }}"
            </blockquote>
          {{- end -}}

          {{- /* Author Info */ -}}
          <div class="c-testimonials-dark__author">
            {{- if $testimonial.name -}}
              <p class="c-testimonials-dark__name">{{ $testimonial.name }}</p>
            {{- end -}}
            {{- if $testimonial.role -}}
              <p class="c-testimonials-dark__role">{{ $testimonial.role }}</p>
            {{- end -}}
          </div>
        </div>
      {{- end -}}
    </div>

  </div>
</section>
