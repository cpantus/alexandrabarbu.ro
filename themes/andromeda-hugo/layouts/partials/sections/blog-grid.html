{{/* Blog Grid Section - Articles/resources with filtering */}}
{{ $section := .Params.blog_grid }}

{{ with $section }}
  {{ if .enable }}
    <section class="section blog-grid">
      <div class="container-xxl position-relative">
        <div class="row">
          <div class="col-lg-12">
            <div class="section-title text-center mb-5">
              {{ if .subtitle }}
                <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
              {{ end }}
              {{ if .title }}
                {{ partial "atoms/heading.html" (dict "level" "h2" "text" .title "class" "title") }}
              {{ end }}
              {{ if .description }}
                <p>{{ .description | markdownify }}</p>
              {{ end }}
            </div>

            {{/* Category Filter Tabs */}}
            {{ if .categories }}
              <ul class="nav nav-pills justify-content-center mb-5" id="blogFilter" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" data-filter="all">
                    {{ i18n "all" | default "Toate" }}
                  </button>
                </li>
                {{ range .categories }}
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" data-filter="{{ .slug }}">{{ .name }}</button>
                  </li>
                {{ end }}
              </ul>
            {{ end }}

            {{/* Blog/Resource Grid */}}
            <div class="row blog-items" id="blogItems">
              {{ range $index, $item := .items }}
                {{- $colorVariants := slice "primary" "secondary" -}}
                {{- $colorVariant := index $colorVariants (mod $index 2) -}}
                <div class="col-lg-4 col-md-6 mb-4 blog-item" data-category="{{ $item.category | default "all" }}">
                  <div class="card card-v4 card-hover-lift h-100" data-aos="fade-up" data-aos-delay="{{ mul $index 100 }}">
                    {{ if $item.image }}
                      <div class="blog-card-image">
                        {{ partial "atoms/image.html" (dict
                          "src" $item.image
                          "alt" $item.title
                          "class" "card-img-top"
                        ) }}
                        {{ if $item.type }}
                          <span class="badge bg-{{ $colorVariant }} blog-badge">{{ $item.type }}</span>
                        {{ end }}
                      </div>
                    {{ end }}
                    <div class="card-body">
                      {{ if $item.title }}
                        {{ partial "atoms/heading.html" (dict
                          "level" "h4"
                          "text" $item.title
                          "class" "card-title"
                          "colorVariant" $colorVariant
                        ) }}
                      {{ end }}
                      {{ if $item.description }}
                        <p class="card-text">{{ $item.description | markdownify }}</p>
                      {{ end }}
                      {{ if $item.link }}
                        {{ partial "atoms/button.html" (dict
                          "text" (i18n "read_more" | default "Citește mai mult")
                          "url" ($item.link | relLangURL)
                          "variant" (printf "outline-%s" $colorVariant)
                          "size" "sm"
                        ) }}
                      {{ end }}
                    </div>
                  </div>
                </div>
              {{ end }}
            </div>

            {{/* Load More Button */}}
            {{ if .show_load_more }}
              <div class="row mt-4">
                <div class="col-lg-12 text-center">
                  {{ partial "atoms/button.html" (dict
                    "text" (i18n "load_more" | default "Încarcă mai multe")
                    "variant" (.button_variant | default "primary")
                    "id" "loadMoreBtn"
                  ) }}
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      </div>
    </section>
  {{ end }}
{{ end }}
