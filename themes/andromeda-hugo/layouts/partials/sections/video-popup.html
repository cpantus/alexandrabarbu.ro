{{/*
  Video Popup Section

  Displays a video section with title, description, and video embed (YouTube/Vimeo/direct).
  Centered layout with glassmorphism play button overlay.

  Front Matter Parameters:
  - .Params.video_section OR .Params.how_it_works_video (object)
    - enable (bool, required): Enable/disable section
    - subtitle (string, optional): Small text above title (e.g., "HOW IT WORKS")
    - title (string, required): Main section heading
    - description (string, optional): Description paragraph
    - video_url (string, required): YouTube/Vimeo URL or direct video file path
    - video_thumbnail (string, optional): Custom thumbnail image (auto-generated for YouTube)
    - variant (string, optional): Color variant (primary/secondary/tertiary/neutral, default: primary)

  BEM Structure:
  - .c-video-section (section block)
  - .c-video-section__container (container wrapper)
  - .c-video-section__header (header wrapper for title/description)
  - .c-video-section__subtitle (small text above title)
  - .c-video-section__description (description text)
  - .c-video-section__video-wrapper (video embed wrapper)

  Example Usage:
  ```yaml
  sections:
    - type: "video-popup"

  video_section:
    enable: true
    subtitle: "How It Works"
    title: "See Therapy in Action"
    description: "Watch this 3-minute video to understand our approach"
    video_url: "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
    video_thumbnail: "images/video-thumb.jpg"  # Optional
    variant: "primary"
  ```

  Features:
  - Centered layout
  - Color variants for theming
  - Video-embed molecule integration (handles YouTube/Vimeo/direct videos)
  - Heading atom integration
  - Markdown support for subtitle and description
  - Auto-generates YouTube thumbnails if not provided
  - Glassmorphism play button overlay
  - Responsive aspect ratios (16:9 default)
  - Null-safe (handles missing optional params)

  Created: 2025-11-20 (Phase 5 refactor)
  Version: 1.0.0 (BEM)
*/}}

{{- $section := .Params.video_section -}}
{{- if not $section -}}
  {{- $section = .Params.how_it_works_video -}}
{{- end -}}

{{- with $section -}}
  {{- if .enable -}}
    {{- $variant := .variant | default "primary" -}}

    <section class="c-video-section c-video-section--{{ $variant }}">
      <div class="c-video-section__container">
        <div class="c-video-section__header">
          {{- if .subtitle -}}
            <p class="c-video-section__subtitle">{{ .subtitle | markdownify }}</p>
          {{- end -}}

          {{- if .title -}}
            {{ partial "atoms/heading.html" (dict
              "level" "h2"
              "text" .title
              "class" "c-video-section__title"
              "markdown" true
              "variant" $variant
            ) }}
          {{- end -}}

          {{- if .description -}}
            <p class="c-video-section__description">{{ .description | markdownify }}</p>
          {{- end -}}
        </div>

        {{- if .video_url -}}
          <div class="c-video-section__video-wrapper">
            {{ partial "molecules/video-embed.html" (dict
              "url" .video_url
              "thumbnail" .video_thumbnail
              "title" .title
              "size" "700x"
              "aspectRatio" "16-9"
              "variant" $variant
            ) }}
          </div>
        {{- end -}}
      </div>
    </section>
  {{- end -}}
{{- end -}}
