{{/*
  ============================================================================
  Approach Preview Section - BEM Architecture
  ============================================================================
  Displays therapeutic approach with feature card and 4 methodology principles

  Features:
  - Methodology tag (pill-shaped badge)
  - Large feature card with quote and icon
  - 4-principle grid (2x2 desktop, stacked mobile)
  - Number badges (01-04)
  - Solid white cards with accent borders
  - Icon gradient rotation

  Data Structure:
  ---------------
  approach_preview:
    tag: "METODOLOGIE"                          # Methodology badge
    title: "My Therapeutic Approach"           # Section heading
    subtitle: "Guiding Principles"             # Optional eyebrow
    description: "Brief intro text..."         # Optional description
    feature_card:                              # Large quote card
      quote: "Nu există o rețetă universală..." # Quote text
      author: "Dr. Alexandra Barbu"             # Author attribution
      icon: "las la-brain"                      # Large icon
    principles:                                 # Array of 4 principles
      - title: "Evidence-Based"
        description: "I use scientifically validated methods..."
        icon: "las la-flask"                   # Line Awesome icon
      - title: "Personalized"
        description: "Every therapy plan is adapted..."
        icon: "las la-user-circle"
    button_text: "Discover Complete Approach"   # Optional CTA
    button_url: "/abordare/"
    button_variant: "primary"

  Parameters:
  -----------
  None - Data-driven from front matter

  Usage:
  ------
  ```yaml
  sections:
    - type: "approach-preview"

  approach_preview:
    tag: "METODOLOGIE"
    title: "Abordarea Mea Terapeutică"
    description: "Abordare integrativă care combină..."
    feature_card:
      quote: "Nu există o rețetă universală în terapie..."
      author: "Dr. Alexandra Barbu"
      icon: "las la-brain"
    principles:
      - title: "Bazat pe Dovezi"
        description: "Folosesc metode validate științific..."
        icon: "las la-flask"
  ```

  BEM Structure:
  --------------
  .c-approach-preview                    - Section wrapper
  .c-approach-preview__header            - Header container
  .c-approach-preview__tag               - Methodology pill badge
  .c-approach-preview__title             - Main heading
  .c-approach-preview__description       - Intro text
  .c-approach-preview__feature-card      - Large quote card
  .c-approach-preview__feature-icon      - Feature card icon (104px)
  .c-approach-preview__quote             - Quote text
  .c-approach-preview__author            - Author attribution
  .c-approach-preview__grid              - Principles grid (2x2)
  .c-approach-preview__principle         - Individual principle card
  .c-approach-preview__number            - Methodology number (01-04)
  .c-approach-preview__icon              - Principle icon (64px)
  .c-approach-preview__principle-title   - Principle heading
  .c-approach-preview__principle-text    - Principle description
  .c-approach-preview__cta-wrapper       - CTA container

  Dependencies:
  -------------
  - atoms/heading.html (title)
  - atoms/button.html (optional CTA)
  - atoms/icon.html (principle icons)
  - _approach-preview.scss (BEM styles)

  Version: 2.0.0 - Design Enhancement Update
  Updated: 2025-11-23
  ============================================================================
*/}}

{{- $data := .Params.approach_preview -}}
{{- if not $data -}}
  {{- $data = site.Data.shared_sections.approach_preview -}}
{{- end -}}

{{- if $data -}}
<section class="c-approach-preview section">
  <div class="o-container">

    {{/* Section Header */}}
    {{- if or $data.tag $data.title $data.description -}}
    <div class="c-approach-preview__header text-center">
      {{- if $data.tag -}}
        <span class="c-approach-preview__tag">{{ $data.tag }}</span>
      {{- end -}}
      {{- if $data.title -}}
        {{ partial "atoms/heading.html" (dict
          "text" $data.title
          "level" 2
          "class" "c-approach-preview__title"
        ) }}
      {{- end -}}
      {{- if $data.description -}}
        <p class="c-approach-preview__description">{{ $data.description }}</p>
      {{- end -}}
    </div>
    {{- end -}}

    {{/* Feature Card (replaces image) */}}
    {{- if $data.feature_card -}}
    <div class="c-approach-preview__feature-card" data-aos="fade-up">
      {{/* Organic blob background */}}
      <div class="c-approach-preview__blob" aria-hidden="true"></div>

      {{/* Feature Icon */}}
      {{- if $data.feature_card.icon -}}
        <div class="c-approach-preview__feature-icon">
          <i class="{{ $data.feature_card.icon }}"></i>
        </div>
      {{- end -}}

      {{/* Quote */}}
      {{- if $data.feature_card.quote -}}
        <blockquote class="c-approach-preview__quote">
          {{ $data.feature_card.quote | markdownify }}
        </blockquote>
      {{- end -}}

      {{/* Author */}}
      {{- if $data.feature_card.author -}}
        <p class="c-approach-preview__author">{{ $data.feature_card.author }}</p>
      {{- end -}}
    </div>
    {{- end -}}

    {{/* Principles Grid */}}
    {{- if $data.principles -}}
    <div class="c-approach-preview__grid">
      {{- range $index, $principle := $data.principles -}}
        {{/* Calculate accent variant rotation: primary → secondary → coral → sage */}}
        {{- $accentVariants := slice "primary" "secondary" "coral" "sage" -}}
        {{- $accentVariant := index $accentVariants (mod $index 4) -}}
        {{/* Format number badge: 01, 02, 03, 04 */}}
        {{- $numberBadge := printf "%02d" (add $index 1) -}}

        <div class="c-approach-preview__principle c-approach-preview__principle--{{ $accentVariant }}" data-aos="fade-up" data-aos-delay="{{ mul $index 100 }}">

          {{/* Methodology Number */}}
          <span class="c-approach-preview__number">{{ $numberBadge }}</span>

          {{/* Principle Icon */}}
          {{- if $principle.icon -}}
            {{ partial "atoms/icon.html" (dict
              "icon" $principle.icon
              "class" "c-approach-preview__icon"
              "size" "md"
            ) }}
          {{- end -}}

          {{/* Principle Title */}}
          {{- if $principle.title -}}
            <h3 class="c-approach-preview__principle-title">{{ $principle.title }}</h3>
          {{- end -}}

          {{/* Principle Description */}}
          {{- if $principle.description -}}
            <p class="c-approach-preview__principle-text">{{ $principle.description }}</p>
          {{- end -}}

        </div>
      {{- end -}}
    </div>
    {{- end -}}

    {{/* Optional CTA */}}
    {{- if $data.button_url -}}
    <div class="c-approach-preview__cta-wrapper text-center">
      {{ partial "atoms/button.html" (dict
        "text" (default (i18n "learn_more") $data.button_text)
        "url" ($data.button_url | relLangURL)
        "variant" (default "primary" $data.button_variant)
        "class" "c-approach-preview__cta"
        "icon" "las la-arrow-right"
      ) }}
    </div>
    {{- end -}}

  </div>
</section>
{{- end -}}
