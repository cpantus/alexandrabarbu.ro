{{/* Service Highlights Section - Left-border accent cards */}}
{{ $section := .Params.service_highlights }}

{{ with $section }}
  {{ if .enable }}
    <section class="section service-highlights">
      <div class="container-xxl position-relative">
        <div class="row">
          <div class="col-lg-12">
            <div class="section-title text-center mb-5">
              {{ if .subtitle }}
                <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
              {{ end }}
              {{ if .title }}
                {{ partial "atoms/heading.html" (dict "level" "h2" "text" .title "class" "title" "markdown" true) }}
              {{ end }}
              {{ if .description }}
                <p>{{ .description | markdownify }}</p>
              {{ end }}
            </div>

            <div class="row">
              {{ range $index, $highlight := .highlights }}
                {{- $colorVariants := slice "primary" "secondary" "coral" "sage" -}}
                {{- $colorVariant := index $colorVariants (mod $index 4) -}}
                <div class="col-lg-{{ $highlight.width | default "6" }} mb-4">
                  <div class="card card-v4 card-top-accent card-top-accent-{{ $colorVariant }} h-100"
                       data-aos="fade-up"
                       data-aos-delay="{{ mul $index 100 }}">
                    <div class="card-body">
                      <div class="d-flex align-items-start">
                        {{ if $highlight.icon }}
                          <div class="me-3">
                            {{ partial "atoms/icon.html" (dict
                              "name" $highlight.icon
                              "size" "2x"
                              "withWrapper" true
                              "wrapperVariant" $colorVariant
                              "wrapperSize" "md"
                            ) }}
                          </div>
                        {{ end }}
                        <div class="flex-grow-1">
                          {{ if $highlight.title }}
                            {{ partial "atoms/heading.html" (dict
                              "level" "h4"
                              "text" $highlight.title
                              "class" "mb-2"
                              "colorVariant" $colorVariant
                              "markdown" true
                            ) }}
                          {{ end }}
                          {{ if $highlight.description }}
                            <p class="mb-0">{{ $highlight.description | markdownify }}</p>
                          {{ end }}
                          {{ if $highlight.items }}
                            <ul class="mt-2">
                              {{ range $highlight.items }}
                                <li>{{ . | markdownify }}</li>
                              {{ end }}
                            </ul>
                          {{ end }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}
{{ end }}
