{{/* =============================================================================
  PRICING TOGGLE MOLECULE - Monthly/Yearly Pricing Period Toggle
  =============================================================================

  Version: 2.0.0 (Phase 3 - BEM Refactor)
  Last Updated: 2025-11-20

  Purpose:
  Interactive toggle switch for switching between monthly and yearly pricing
  periods. Used in pricing-tables sections to dynamically show different
  price values based on user selection.

  Features:
  - BEM structure (.c-pricing__switch, .c-pricing__toggle, .c-pricing__check, .c-pricing__switch-handle)
  - Accessible checkbox input with ARIA labels
  - Smooth toggle animation with design tokens
  - i18n support for labels
  - JavaScript-compatible (checkbox state drives price display)
  - Design tokens only (8pt spacing grid, Crimson Pro typography)
  - WCAG AA compliant
  - Full backward compatibility via SCSS @extend

  BEM Structure:
  - Block:    .c-pricing__switch (outer container)
  - Elements: .c-pricing__toggle (switch wrapper)
              .c-pricing__check (checkbox input)
              .c-pricing__switch-handle (visual sliding handle)
              .c-pricing__label (option labels)

  =============================================================================
  PARAMETERS
  =============================================================================

  Optional:
  - monthlyLabel (string) - Label for monthly option (default: i18n "monthly")
  - yearlyLabel (string) - Label for yearly option (default: i18n "yearly")
  - defaultYearly (bool) - Start with yearly selected (default: false)
  - class (string) - Additional CSS classes for outer container
  - id (string) - Custom ID for the toggle input (default: "pricing-toggle")

  =============================================================================
  USAGE EXAMPLES
  =============================================================================

  Basic (defaults to i18n translation):
  {{ partial "molecules/pricing-toggle.html" . }}

  Custom labels:
  {{ partial "molecules/pricing-toggle.html" (dict
    "monthlyLabel" "Per Month"
    "yearlyLabel" "Per Year"
  ) }}

  Default to yearly:
  {{ partial "molecules/pricing-toggle.html" (dict
    "defaultYearly" true
  ) }}

  With custom ID and class:
  {{ partial "molecules/pricing-toggle.html" (dict
    "id" "custom-pricing-toggle"
    "class" "mb-5"
  ) }}

  =============================================================================
  JAVASCRIPT INTEGRATION
  =============================================================================
  The toggle works with JavaScript to show/hide pricing based on checkbox state:

  document.querySelector('#pricing-toggle').addEventListener('change', (e) => {
    const isYearly = e.target.checked;
    // Toggle .pricing-monthly / .pricing-yearly visibility
    document.querySelectorAll('.c-pricing__amount').forEach(el => {
      if (isYearly) {
        el.querySelector('.pricing-monthly').classList.add('d-none');
        el.querySelector('.pricing-yearly').classList.remove('d-none');
      } else {
        el.querySelector('.pricing-monthly').classList.remove('d-none');
        el.querySelector('.pricing-yearly').classList.add('d-none');
      }
    });
  });

  =============================================================================
  SCSS DEPENDENCY
  =============================================================================
  Styles: themes/andromeda-hugo/assets/scss/06-components/_pricing.scss
  - Toggle switch styles with smooth animation
  - Label active states (emerald color when selected)
  - Design tokens (spacing, colors, transitions)
  - Legacy compatibility via @extend

  =============================================================================
  BACKWARD COMPATIBILITY
  =============================================================================
  Old HTML using .pricing-switch, .pricing-check classes will continue to
  work via @extend in _pricing.scss. No breaking changes.

  Legacy classes mapped to BEM:
  .pricing-switch → .c-pricing__switch
  .toggle → .c-pricing__toggle
  .pricing-check → .c-pricing__check
  .switch → .c-pricing__switch-handle

  ============================================================================= */}}

{{- /* ========== PARAMETER DEFAULTS ========== */ -}}
{{- $monthlyLabel := .monthlyLabel | default (T "monthly") -}}
{{- $yearlyLabel := .yearlyLabel | default (T "yearly") -}}
{{- $defaultYearly := .defaultYearly | default false -}}
{{- $class := .class | default "" -}}
{{- $id := .id | default "pricing-toggle" -}}

{{- /* ========== BEM CLASS CONSTRUCTION ========== */ -}}
{{- $switchClasses := slice "c-pricing__switch" -}}

{{- /* Add custom classes */ -}}
{{- if $class -}}
  {{- $switchClasses = $switchClasses | append $class -}}
{{- end -}}

{{- /* Join all classes */ -}}
{{- $switchClassStr := delimit $switchClasses " " -}}

<div class="{{ $switchClassStr }}">
  {{- /* Monthly Label */ -}}
  <label
    class="c-pricing__label{{ if not $defaultYearly }} active{{ end }}"
    for="{{ $id }}-monthly"
    id="monthly">
    {{ $monthlyLabel }}
  </label>

  {{- /* Toggle Switch */ -}}
  <div class="c-pricing__toggle">
    <input
      class="c-pricing__check"
      type="checkbox"
      id="{{ $id }}"
      {{ if $defaultYearly }}checked{{ end }}
      aria-label="{{ T "toggle_pricing_period" | default "Toggle between monthly and yearly pricing" }}"
    />
    <b class="c-pricing__switch-handle"></b>
  </div>

  {{- /* Yearly Label */ -}}
  <label
    class="c-pricing__label{{ if $defaultYearly }} active{{ end }}"
    for="{{ $id }}-yearly"
    id="annually">
    {{ $yearlyLabel }}
  </label>
</div>

{{/* =============================================================================
  RENDERED HTML EXAMPLE
  =============================================================================

  <div class="c-pricing__switch">
    <label class="c-pricing__label active" for="pricing-toggle-monthly" id="monthly">
      Monthly
    </label>
    <div class="c-pricing__toggle">
      <input
        class="c-pricing__check"
        type="checkbox"
        id="pricing-toggle"
        aria-label="Toggle between monthly and yearly pricing"
      />
      <b class="c-pricing__switch-handle"></b>
    </div>
    <label class="c-pricing__label" for="pricing-toggle-yearly" id="annually">
      Yearly
    </label>
  </div>

  =============================================================================
  ACCESSIBILITY NOTES
  =============================================================================

  - Checkbox input is visually hidden but remains accessible to screen readers
  - ARIA label provides context for screen reader users
  - Labels are associated with checkbox via for attribute
  - Active state provides visual feedback for current selection
  - Keyboard accessible (Space/Enter toggles checkbox)
  - Focus indicators provided by browser defaults + CSS

  =============================================================================
  CHANGELOG
  =============================================================================

  v2.0.0 (2025-11-20) - Phase 3 BEM Refactor
  - Migrated to BEM class structure (.c-pricing__switch, .c-pricing__*)
  - Removed Bootstrap utility classes (d-flex, align-items-center, etc.)
  - Added .c-pricing__label class for option labels
  - Added active state logic based on defaultYearly param
  - Improved parameter documentation
  - Added JavaScript integration guide
  - Added backward compatibility notes
  - Added accessibility documentation

  v1.0.0 (2024) - Initial Implementation
  - Legacy .pricing-switch classes
  - Bootstrap utility classes
  - Basic toggle functionality

  ============================================================================= */}}
