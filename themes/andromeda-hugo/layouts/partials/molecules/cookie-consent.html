{{/*
  Cookie Consent Banner Molecule - GDPR-compliant cookie consent
  BEM Component: .c-cookie-consent (refactored 2025-11-20)

  Usage:
    {{ partial "molecules/cookie-consent.html" (dict "variant" "primary") }}

  Parameters:
    variant (optional) - Color variant: "primary" (default), "secondary", "tertiary", "neutral"
    class (optional)   - Additional CSS classes

  Color Variants:
    - "primary" (default) - Emerald accent (professional, trustworthy)
    - "secondary"        - Terracotta accent (warm, friendly)
    - "tertiary"         - Blue accent (calm, informational)
    - "neutral"          - Gray accent (subtle, minimal)

  BEM Structure:
    .c-cookie-consent              - Root container (fixed bottom banner)
    .c-cookie-consent--{variant}   - Color variant modifier
    .c-cookie-consent--visible     - Visible state modifier (added by JS)
    .c-cookie-consent__content     - Content wrapper (container with padding)
    .c-cookie-consent__text        - Text content area
    .c-cookie-consent__title       - Heading element (uses heading atom)
    .c-cookie-consent__message     - Message text
    .c-cookie-consent__actions     - Button container
    .c-cookie-consent__button      - Individual button (uses button atom)

  Features:
    - GDPR compliant (explicit consent, essential-only option)
    - localStorage preference storage (persists across sessions)
    - Auto-show after 1s delay (if no preference stored)
    - Fade animation (slide-up + opacity)
    - Two consent options: Accept all vs Essential only
    - Heading atom integration
    - Button atom integration (primary + outline variants)
    - 4 color variants matching design system
    - Responsive layout (stack buttons on mobile)
    - Fixed positioning (bottom of viewport)
    - Glassmorphism background with blur
    - Keyboard accessible (focus states, ARIA labels)
    - Psychology practice-specific messaging
    - JavaScript extracted to cookie-consent.js file

  JavaScript:
    - Loaded via assets/js/cookie-consent.js
    - Checks localStorage for existing preference
    - Shows banner with animation if no preference
    - Stores choice in localStorage ('accepted' or 'essential-only')
    - Hides banner with fade-out animation
    - Respects prefers-reduced-motion

  i18n Keys (define in i18n/ro.yaml and i18n/en.yaml):
    - cookie_title: Banner heading (default: "üç™ RespectƒÉm Confiden»õialitatea Ta")
    - cookie_message: GDPR explanation message
    - cookie_accept: Accept button text (default: "Accept")
    - cookie_decline: Essential-only button text (default: "Doar Esen»õiale")

  Examples:
    Primary variant (default):
      {{ partial "molecules/cookie-consent.html" . }}

    Secondary variant (warm):
      {{ partial "molecules/cookie-consent.html" (dict "variant" "secondary") }}

    Tertiary variant (calm):
      {{ partial "molecules/cookie-consent.html" (dict "variant" "tertiary") }}

    Neutral variant (subtle):
      {{ partial "molecules/cookie-consent.html" (dict "variant" "neutral") }}
*/}}

{{/* Parameter extraction with defaults */}}
{{ $variant := .variant | default "primary" }}
{{ $class := .class | default "" }}

{{/* Build BEM class with variant modifier */}}
{{ $bemClass := "c-cookie-consent" }}
{{ if $variant }}
  {{ $bemClass = printf "%s c-cookie-consent--%s" $bemClass $variant }}
{{ end }}
{{ if $class }}
  {{ $bemClass = printf "%s %s" $bemClass $class }}
{{ end }}

<div id="cookie-consent" class="{{ $bemClass }}">
  <div class="c-cookie-consent__content">
    <div class="c-cookie-consent__text">
      {{ partial "atoms/heading.html" (dict
        "text" (i18n "cookie_title" | default "üç™ RespectƒÉm Confiden»õialitatea Ta")
        "level" 5
        "variant" $variant
        "class" "c-cookie-consent__title"
      ) }}
      <p class="c-cookie-consent__message">
        {{ i18n "cookie_message" | default "Folosim cookies esen»õiale pentru func»õionarea site-ului »ôi cookie-uri de analizƒÉ pentru a √ÆmbunƒÉtƒÉ»õi experien»õa ta. Nu folosim cookies de marketing. Datele tale sunt protejate conform GDPR." | markdownify }}
      </p>
    </div>
    <div class="c-cookie-consent__actions">
      <button type="button" id="cookie-accept"
        class="c-button c-button--{{ $variant }} c-button--sm c-cookie-consent__button">
        <span class="c-button__text">{{ i18n "cookie_accept" | default "Accept Toate" }}</span>
      </button>
      <button type="button" id="cookie-customize"
        class="c-button c-button--outline-{{ $variant }} c-button--sm c-cookie-consent__button">
        <span class="c-button__text">{{ i18n "cookie_customize" | default "PersonalizeazƒÉ" }}</span>
      </button>
      <button type="button" id="cookie-decline"
        class="c-button c-button--outline-{{ $variant }} c-button--sm c-cookie-consent__button">
        <span class="c-button__text">{{ i18n "cookie_decline" | default "Doar Esen»õiale" }}</span>
      </button>
    </div>
  </div>
</div>
