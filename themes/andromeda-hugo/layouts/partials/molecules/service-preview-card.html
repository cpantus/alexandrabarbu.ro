{{- /*
  Service Preview Card Molecule

  Description:
    Service preview card for services overview grid. Shows service name,
    icon, short description, and CTA button. Used on services landing page
    to showcase individual service offerings.

  BEM Structure:
    - Block: .c-service-card
    - Elements: __icon, __header, __title, __excerpt, __footer, __link
    - Modifiers: --primary, --secondary, --tertiary, --neutral, --success, --warning, --error, --info

  Parameters:
    - title (string, required): Service name
    - icon (string, optional): Icon class (Line Awesome)
    - excerpt (string, optional): Short service description
    - url (string, required): Link to full service page
    - button_text (string, optional): CTA button text (defaults to i18n "learn_more")
    - button_variant (string, optional): Button style variant (default: "outline-primary")
    - variant (string, optional): Color variant (primary|secondary|tertiary|neutral|success|warning|error|info, default: primary)
    - image (string, optional): Service image (alternative to icon)
    - number_badge (string, optional): Number badge text (e.g., "01", "02") displayed in top-right corner
    - accent_color (string, optional): Top border accent color (uses variant if not specified)

  Usage:
    {{ partial "molecules/service-preview-card.html" (dict
      "title" "Individual Therapy"
      "icon" "las la-user"
      "excerpt" "One-on-one therapeutic support for personal growth"
      "url" "/services/individual-therapy"
      "button_text" "Learn More"
      "variant" "primary"
    ) }}

  Dependencies:
    - Atoms: icon.html, heading.html, button.html, image.html (optional)
    - SCSS: _service-card.scss

  Accessibility:
    - Semantic HTML with article element
    - Heading hierarchy (h3 for title)
    - Descriptive link text
    - ARIA labels for icon-only elements
    - Focus indicators via CSS

  Version: 1.0.0
  Last Updated: 2025-11-20
*/ -}}

{{- /* Parameter Extraction */ -}}
{{- $title := .title -}}
{{- $icon := .icon | default "" -}}
{{- $excerpt := .excerpt | default "" -}}
{{- $url := .url -}}
{{- $button_text := .button_text | default (i18n "learn_more") -}}
{{- $button_variant := .button_variant | default "outline-primary" -}}
{{- $variant := .variant | default "primary" -}}
{{- $image := .image | default "" -}}
{{- $number_badge := .number_badge | default "" -}}
{{- $accent_color := .accent_color | default $variant -}}

{{- /* Validation */ -}}
{{- if not $title -}}
  {{- warnf "service-preview-card: 'title' parameter is required" -}}
{{- end -}}
{{- if not $url -}}
  {{- warnf "service-preview-card: 'url' parameter is required" -}}
{{- end -}}

{{- /* Valid Variants */ -}}
{{- $valid_variants := slice "primary" "secondary" "tertiary" "neutral" "success" "warning" "error" "info" -}}
{{- if not (in $valid_variants $variant) -}}
  {{- warnf "service-preview-card: Invalid variant '%s'. Using 'primary'. Valid options: %s" $variant (delimit $valid_variants ", ") -}}
  {{- $variant = "primary" -}}
{{- end -}}

{{- /* Build Modifier Class */ -}}
{{- $modifier_class := printf "c-service-card--%s" $variant -}}

<article class="c-service-card {{ $modifier_class }}">
  {{- /* Number Badge (if provided) */ -}}
  {{- if $number_badge -}}
    <span class="c-service-card__badge">{{ $number_badge }}</span>
  {{- end -}}

  {{- /* Icon or Image */ -}}
  {{- if $image -}}
    <div class="c-service-card__image">
      {{ partial "atoms/image.html" (dict
        "src" $image
        "alt" $title
        "loading" "lazy"
        "class" "c-service-card__img"
      ) }}
    </div>
  {{- else if $icon -}}
    <div class="c-service-card__icon">
      {{ partial "atoms/icon.html" (dict
        "icon" $icon
        "size" "2xl"
        "variant" $variant
        "wrapper" true
        "wrapper_size" "lg"
      ) }}
    </div>
  {{- end -}}

  {{- /* Header with Title */ -}}
  <header class="c-service-card__header">
    {{ partial "atoms/heading.html" (dict
      "level" 3
      "text" $title
      "class" "c-service-card__title"
      "variant" $variant
    ) }}
  </header>

  {{- /* Excerpt */ -}}
  {{- if $excerpt -}}
    <div class="c-service-card__excerpt">
      <p class="c-service-card__text">{{ $excerpt | markdownify }}</p>
    </div>
  {{- end -}}

  {{- /* Footer with CTA Button */ -}}
  <footer class="c-service-card__footer">
    {{ partial "atoms/button.html" (dict
      "text" $button_text
      "url" $url
      "variant" $button_variant
      "icon" "arrow-right"
      "icon_position" "right"
      "class" "c-service-card__link"
    ) }}
  </footer>
</article>
