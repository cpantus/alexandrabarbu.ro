{{/*
  Logo Molecule (BEM Refactor v2.0)

  Displays the site logo (inline SVG) with flexible sizing, colors, and optional linking.
  Supports 4 semantic color variants and 3 size variants.

  BEM Structure:
    .c-logo                         ‚Üí Container
    .c-logo--linked                 ‚Üí Linked variant modifier
    .c-logo--primary                ‚Üí Primary color variant
    .c-logo--secondary              ‚Üí Secondary color variant
    .c-logo--tertiary               ‚Üí Tertiary color variant
    .c-logo--neutral                ‚Üí Neutral color variant
    .c-logo--sm                     ‚Üí Small size variant (150px width)
    .c-logo--md                     ‚Üí Medium size variant (200px width, default)
    .c-logo--lg                     ‚Üí Large size variant (300px width)
    .c-logo__link                   ‚Üí Link wrapper element
    .c-logo__svg                    ‚Üí SVG element

  Usage:
    Simple (no link):
      {{ partial "molecules/logo.html" (dict "color" "primary" "size" "md") }}

    Linked (homepage):
      {{ partial "molecules/logo.html" (dict "color" "primary" "size" "lg" "link" true "context" .) }}

    Header (linked, small):
      {{ partial "molecules/logo.html" (dict "color" "neutral" "size" "sm" "link" true "context" .) }}

  Parameters:
    - color (string, optional): "primary", "secondary", "tertiary", "neutral" (default: "primary")
    - size (string, optional): "sm", "md", "lg" (default: "md")
    - link (bool, optional): Wrap logo in homepage link (default: false)
    - context (context, optional): Page context for link generation (required if link=true)

  Features:
    - üé® 4 semantic color variants
    - üìê 3 size variants (150px, 200px, 300px)
    - üîó Optional homepage link wrapper
    - ‚ôø Accessibility (aria-label, role, title)
    - üì± Responsive (scales with CSS)
    - üéØ BEM class structure
    - üíØ Inline SVG for best performance
    - üé≠ Color inherits from parent via currentColor

  Design Tokens:
    - Colors: $color-primary, $color-secondary, $color-tertiary, $color-neutral
    - Transitions: $transition-base (250ms)
    - Typography: Links use inherit

  Accessibility:
    - aria-label with site title
    - role="img" for screen readers
    - title attribute for tooltip
    - Focus indicators on linked variant
    - Keyboard navigation support
*/}}

{{- $color := .color | default "primary" -}}
{{- $size := .size | default "md" -}}
{{- $link := .link | default false -}}
{{- $context := .context | default . -}}

{{/* Validation */}}
{{- if not (in (slice "primary" "secondary" "tertiary" "neutral") $color) -}}
  {{- warnf "logo.html: Invalid color '%s', using 'primary'. Valid: primary, secondary, tertiary, neutral" $color -}}
  {{- $color = "primary" -}}
{{- end -}}

{{- if not (in (slice "sm" "md" "lg") $size) -}}
  {{- warnf "logo.html: Invalid size '%s', using 'md'. Valid: sm, md, lg" $size -}}
  {{- $size = "md" -}}
{{- end -}}

{{- if and $link (not $context) -}}
  {{- errorf "logo.html: Missing required 'context' parameter when link=true" -}}
{{- end -}}

{{/* Generate BEM classes */}}
{{- $classes := slice "c-logo" (printf "c-logo--%s" $color) (printf "c-logo--%s" $size) -}}
{{- if $link -}}
  {{- $classes = $classes | append "c-logo--linked" -}}
{{- end -}}

{{/* Logo Image content (use external logo.svg) */}}
{{- define "logo-svg-content" -}}
{{- $logoPath := site.Params.logo | default "images/logo.svg" -}}
<img
  src="{{ $logoPath | relURL }}"
  alt="{{ site.Title }}"
  class="c-logo__svg"
  aria-label="{{ site.Title }}"
  title="{{ site.Title }}"
/>
{{- end -}}

{{/* Render logo (with or without link) */}}
<div class="{{ delimit $classes " " }}">
  {{- if $link -}}
    {{- $homeURL := "" -}}
    {{- if eq $context.Language.Lang site.DefaultContentLanguage -}}
      {{- $homeURL = "/" -}}
    {{- else -}}
      {{- $homeURL = printf "/%s/" $context.Language.Lang -}}
    {{- end -}}
    <a href="{{ $homeURL }}" class="c-logo__link" aria-label="{{ i18n `home` | default `Home` }}">
      {{- template "logo-svg-content" . -}}
    </a>
  {{- else -}}
    {{- template "logo-svg-content" . -}}
  {{- end -}}
</div>
