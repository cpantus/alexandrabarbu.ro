{{/*
  Logo Molecule (BEM Refactor v2.0)

  Displays the site logo (inline SVG) with flexible sizing, colors, and optional linking.
  Supports 4 semantic color variants and 3 size variants.

  BEM Structure:
    .c-logo                         ‚Üí Container
    .c-logo--linked                 ‚Üí Linked variant modifier
    .c-logo--primary                ‚Üí Primary color variant
    .c-logo--secondary              ‚Üí Secondary color variant
    .c-logo--tertiary               ‚Üí Tertiary color variant
    .c-logo--neutral                ‚Üí Neutral color variant
    .c-logo--sm                     ‚Üí Small size variant (150px width)
    .c-logo--md                     ‚Üí Medium size variant (200px width, default)
    .c-logo--lg                     ‚Üí Large size variant (300px width)
    .c-logo__link                   ‚Üí Link wrapper element
    .c-logo__svg                    ‚Üí SVG element

  Usage:
    Simple (no link):
      {{ partial "molecules/logo.html" (dict "color" "primary" "size" "md") }}

    Linked (homepage):
      {{ partial "molecules/logo.html" (dict "color" "primary" "size" "lg" "link" true "context" .) }}

    Header (linked, small):
      {{ partial "molecules/logo.html" (dict "color" "neutral" "size" "sm" "link" true "context" .) }}

  Parameters:
    - color (string, optional): "primary", "secondary", "tertiary", "neutral" (default: "primary")
    - size (string, optional): "sm", "md", "lg" (default: "md")
    - link (bool, optional): Wrap logo in homepage link (default: false)
    - context (context, optional): Page context for link generation (required if link=true)

  Features:
    - üé® 4 semantic color variants
    - üìê 3 size variants (150px, 200px, 300px)
    - üîó Optional homepage link wrapper
    - ‚ôø Accessibility (aria-label, role, title)
    - üì± Responsive (scales with CSS)
    - üéØ BEM class structure
    - üíØ Inline SVG for best performance
    - üé≠ Color inherits from parent via currentColor

  Design Tokens:
    - Colors: $color-primary, $color-secondary, $color-tertiary, $color-neutral
    - Transitions: $transition-base (250ms)
    - Typography: Links use inherit

  Accessibility:
    - aria-label with site title
    - role="img" for screen readers
    - title attribute for tooltip
    - Focus indicators on linked variant
    - Keyboard navigation support
*/}}

{{- $color := .color | default "primary" -}}
{{- $size := .size | default "md" -}}
{{- $link := .link | default false -}}
{{- $context := .context | default . -}}

{{/* Validation */}}
{{- if not (in (slice "primary" "secondary" "tertiary" "neutral") $color) -}}
  {{- warnf "logo.html: Invalid color '%s', using 'primary'. Valid: primary, secondary, tertiary, neutral" $color -}}
  {{- $color = "primary" -}}
{{- end -}}

{{- if not (in (slice "sm" "md" "lg") $size) -}}
  {{- warnf "logo.html: Invalid size '%s', using 'md'. Valid: sm, md, lg" $size -}}
  {{- $size = "md" -}}
{{- end -}}

{{- if and $link (not $context) -}}
  {{- errorf "logo.html: Missing required 'context' parameter when link=true" -}}
{{- end -}}

{{/* Generate BEM classes */}}
{{- $classes := slice "c-logo" (printf "c-logo--%s" $color) (printf "c-logo--%s" $size) -}}
{{- if $link -}}
  {{- $classes = $classes | append "c-logo--linked" -}}
{{- end -}}

{{/* Logo SVG content (reusable) */}}
{{- define "logo-svg-content" -}}
<svg
  class="c-logo__svg"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="1.1"
  viewBox="0 0 3148.92 698.93"
  aria-label="{{ site.Title }}"
  title="{{ site.Title }}"
  role="img">
  <g transform="scale(7.446032075939635) translate(10, 10)">
    <g id="logo-text" transform="matrix(0.8078802295387927,0,0,0.8078802295387927,9.014386000542206,57.46148450216553)" fill="currentColor">
      <path d="M14.86 17.96 c-0.76 0.76 -1.6234 1.3399 -2.59 1.7399 s-1.99 0.6 -3.07 0.6 c-1.1067 0 -2.1434 -0.21 -3.11 -0.63 s-1.81 -0.99 -2.53 -1.71 s-1.29 -1.5633 -1.71 -2.53 s-0.63 -2.0034 -0.63 -3.11 s0.21 -2.1334 0.63 -3.08 s0.99334 -1.77 1.72 -2.47 s1.5733 -1.25 2.54 -1.65 s1.9967 -0.6 3.09 -0.6 c1.08 0 2.1034 0.2 3.07 0.6 s1.83 0.98 2.59 1.74 c0.17334 0.17334 0.26 0.38 0.26 0.62 s-0.08666 0.44666 -0.26 0.62 c-0.18666 0.18666 -0.4 0.28 -0.64 0.28 s-0.44666 -0.09334 -0.62 -0.28 c-0.6 -0.58666 -1.2733 -1.0367 -2.02 -1.35 s-1.54 -0.47 -2.38 -0.47 c-0.85334 0 -1.6567 0.15334 -2.41 0.46 s-1.41 0.73 -1.97 1.27 s-1.0033 1.18 -1.33 1.92 s-0.49 1.5367 -0.49 2.39 s0.16334 1.6567 0.49 2.41 s0.77 1.41 1.33 1.97 s1.2167 1.0033 1.97 1.33 s1.5567 0.49 2.41 0.49 c0.77334 0 1.5133 -0.13334 2.22 -0.4 s1.3467 -0.65332 1.92 -1.16 l0 -3.76 l-4.04 0 c-0.25334 0 -0.46668 -0.08666 -0.64002 -0.26 s-0.26 -0.38 -0.26 -0.62 c0 -0.25334 0.08666 -0.46668 0.26 -0.64002 s0.38668 -0.26 0.64002 -0.26 l4.92 0 c0.25334 0 0.46668 0.08666 0.64002 0.26 s0.26 0.38668 0.26 0.64002 l0 5.02 c0 0.24 -0.08666 0.44666 -0.26 0.62 z M41.752 20.22 c-0.10666 0.05334 -0.21992 0.08 -0.33992 0.08 c-0.17334 0 -0.33668 -0.04666 -0.49002 -0.14 s-0.26334 -0.22668 -0.33 -0.40002 l-1.58 -3.72 l-7.26 0 l-1.58 3.72 c-0.09334 0.22666 -0.25334 0.38666 -0.48 0.48 s-0.45332 0.08668 -0.67998 -0.01998 c-0.22666 -0.09334 -0.38666 -0.25334 -0.48 -0.48 s-0.08668 -0.45332 0.01998 -0.67998 l1.8 -4.26 l4.22 -9.88 c0.06666 -0.17334 0.17332 -0.30668 0.31998 -0.40002 s0.31332 -0.14 0.49998 -0.14 c0.17334 0 0.33334 0.04666 0.48 0.14 s0.25332 0.22668 0.31998 0.40002 c1.0133 2.3734 2.02 4.73 3.02 7.07 s2.0066 4.6966 3.02 7.07 c0.09334 0.22666 0.09334 0.45332 0 0.67998 s-0.25334 0.38666 -0.48 0.48 z M35.392 7.539999999999999 l-2.88 6.72 l5.74 0 z M59.624 20.3 c-0.61334 0 -1.1867 -0.11668 -1.72 -0.35002 s-1 -0.55 -1.4 -0.95 s-0.71666 -0.86666 -0.95 -1.4 s-0.35 -1.1067 -0.35 -1.72 c0 -0.25334 0.08666 -0.46668 0.26 -0.64002 s0.38668 -0.26 0.64002 -0.26 c0.24 0 0.44666 0.08666 0.62 0.26 s0.26 0.38668 0.26 0.64002 c0 0.36 0.07 0.7 0.21 1.02 s0.33 0.6 0.57 0.84 s0.52 0.43 0.84 0.57 s0.66 0.21 1.02 0.21 s0.70334 -0.07 1.03 -0.21 s0.61 -0.33 0.85 -0.57 s0.43 -0.52 0.57 -0.84 s0.21 -0.66 0.21 -1.02 c0 -0.44 -0.08666 -0.80334 -0.26 -1.09 s-0.41334 -0.53666 -0.72 -0.75 c-0.14666 -0.10666 -0.31332 -0.20332 -0.49998 -0.28998 s-0.38 -0.17666 -0.58 -0.27 c-0.2 -0.08 -0.40666 -0.16 -0.62 -0.24 s-0.43334 -0.16 -0.66 -0.24 c-0.44 -0.16 -0.88334 -0.34 -1.33 -0.54 s-0.84666 -0.45 -1.2 -0.75 s-0.64334 -0.67334 -0.87 -1.12 s-0.34 -0.99666 -0.34 -1.65 c0 -0.61334 0.11666 -1.1867 0.35 -1.72 s0.55 -1 0.95 -1.4 s0.86666 -0.71666 1.4 -0.95 s1.1067 -0.35 1.72 -0.35 s1.19 0.11666 1.73 0.35 s1.01 0.55 1.41 0.95 s0.71666 0.86666 0.95 1.4 s0.35 1.1067 0.35 1.72 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38668 0.26 -0.64002 0.26 c-0.24 0 -0.44666 -0.08666 -0.62 -0.26 s-0.26 -0.38 -0.26 -0.62 c0 -0.36 -0.07 -0.70334 -0.21 -1.03 s-0.33 -0.61 -0.57 -0.85 s-0.52334 -0.43 -0.85 -0.57 s-0.67 -0.21 -1.03 -0.21 s-0.7 0.07 -1.02 0.21 s-0.6 0.33 -0.84 0.57 s-0.43 0.52334 -0.57 0.85 s-0.21 0.67 -0.21 1.03 c0 0.4 0.08334 0.73334 0.25 1 s0.40332 0.5 0.70998 0.7 c0.32 0.2 0.68 0.38 1.08 0.54 l0.64 0.24 l0.66 0.24 c0.44 0.16 0.88334 0.34334 1.33 0.55 s0.84666 0.46666 1.2 0.78 s0.64334 0.70334 0.87 1.17 s0.34 1.04 0.34 1.72 c0 0.61334 -0.11666 1.1867 -0.35 1.72 s-0.55 1 -0.95 1.4 s-0.87 0.71666 -1.41 0.95 s-1.1167 0.35 -1.73 0.35 z M79.196 20.3 c-0.25334 0 -0.46668 -0.08666 -0.64002 -0.26 s-0.26 -0.38 -0.26 -0.62 l0 -14.02 c0 -0.24 0.08666 -0.44666 0.26 -0.62 s0.38668 -0.26 0.64002 -0.26 c0.24 0 0.44666 0.08666 0.62 0.26 s0.26 0.38 0.26 0.62 l0 14.02 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38 0.26 -0.62 0.26 z M109.46799999999999 20.3 c-0.24 0 -0.44666 -0.08666 -0.62 -0.26 s-0.26 -0.38 -0.26 -0.62 l0 -10.42 l-5.24 10.8 c-0.08 0.14666 -0.19334 0.26666 -0.34 0.36 s-0.3 0.14 -0.46 0.14 s-0.31334 -0.04666 -0.46 -0.14 s-0.26 -0.21334 -0.34 -0.36 l-5.24 -10.8 l0 10.42 c0 0.24 -0.08334 0.44666 -0.25 0.62 s-0.37666 0.26 -0.63 0.26 c-0.24 0 -0.44666 -0.08666 -0.62 -0.26 s-0.26 -0.38 -0.26 -0.62 l0 -14.02 c0 -0.24 0.08666 -0.44666 0.26 -0.62 s0.38 -0.26 0.62 -0.26 c0.36 0 0.62666 0.16 0.8 0.48 l6.12 12.42 l6.12 -12.42 c0.17334 -0.32 0.44 -0.48 0.8 -0.48 c0.24 0 0.44666 0.08666 0.62 0.26 s0.26 0.38 0.26 0.62 l0 14.02 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38 0.26 -0.62 0.26 z M153.132 20.3 c-0.33334 0 -0.58668 -0.14 -0.76002 -0.42 l-7.22 -11.44 l0 10.98 c0 0.24 -0.08334 0.44666 -0.25 0.62 s-0.37666 0.26 -0.63 0.26 c-0.24 0 -0.44666 -0.08666 -0.62 -0.26 s-0.26 -0.38 -0.26 -0.62 l0 -14.02 c0 -0.24 0.08666 -0.44666 0.26 -0.62 s0.38 -0.26 0.62 -0.26 c0.33334 0 0.58668 0.13334 0.76002 0.4 l7.22 11.44 l0 -10.96 c0 -0.24 0.08334 -0.44666 0.25 -0.62 s0.37666 -0.26 0.63 -0.26 c0.24 0 0.44666 0.08666 0.62 0.26 s0.26 0.38 0.26 0.62 l0 14.02 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38 0.26 -0.62 0.26 z M176.144 20.3 c-1.0933 0 -2.12 -0.20666 -3.08 -0.62 s-1.7967 -0.97668 -2.51 -1.69 s-1.2767 -1.55 -1.69 -2.51 s-0.62 -1.9867 -0.62 -3.08 c0 -1.08 0.20666 -2.1 0.62 -3.06 s0.97668 -1.7967 1.69 -2.51 s1.55 -1.2767 2.51 -1.69 s1.9867 -0.62 3.08 -0.62 c1.08 0 2.1 0.20666 3.06 0.62 s1.7967 0.97668 2.51 1.69 s1.2767 1.55 1.69 2.51 s0.62 1.98 0.62 3.06 c0 1.0933 -0.20666 2.12 -0.62 3.08 s-0.97668 1.7967 -1.69 2.51 s-1.55 1.2767 -2.51 1.69 s-1.98 0.62 -3.06 0.62 z M176.144 6.279999999999999 c-0.84 0 -1.6333 0.16 -2.38 0.48 s-1.4 0.75666 -1.96 1.31 s-1 1.2033 -1.32 1.95 s-0.48 1.54 -0.48 2.38 s0.16 1.6333 0.48 2.38 s0.76 1.4 1.32 1.96 s1.2133 1 1.96 1.32 s1.54 0.48 2.38 0.48 s1.6333 -0.16 2.38 -0.48 s1.3967 -0.76 1.95 -1.32 s0.99 -1.2133 1.31 -1.96 s0.48 -1.54 0.48 -2.38 s-0.16 -1.6333 -0.48 -2.38 s-0.75666 -1.3967 -1.31 -1.95 s-1.2033 -0.99 -1.95 -1.31 s-1.54 -0.48 -2.38 -0.48 z M202.69600000000003 13.36 l-0.24 -0.000039062 l0.26 -0.46 l3.62 6.06 c0.08 0.14666 0.12 0.3 0.12 0.46 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38 0.26 -0.62 0.26 c-0.16 0 -0.31 -0.04 -0.45 -0.12 s-0.25 -0.18666 -0.33 -0.32 l-3.88 -6.5 l-0.86 0 l0 6.06 c0 0.24 -0.08666 0.44666 -0.26 0.62 s-0.38 0.26 -0.62 0.26 c-0.25334 0 -0.46668 -0.08666 -0.64002 -0.26 s-0.26 -0.38 -0.26 -0.62 l0 -14.02 c0 -0.24 0.08666 -0.44666 0.26 -0.62 s0.38668 -0.26 0.64002 -0.26 l3.52 0 c0.61334 0 1.19 0.11666 1.73 0.35 s1.01 0.55 1.41 0.95 s0.71666 0.86666 0.95 1.4 s0.35 1.1067 0.35 1.72 s-0.11666 1.1867 -0.35 1.72 s-0.55 1 -0.95 1.4 s-0.87 0.71666 -1.41 0.95 s-1.1167 0.35 -1.73 0.35 z M202.69600000000003 6.279999999999999 l-2.64 0 l0 5.3 l2.64 0 c0.36 0 0.70334 -0.07 1.03 -0.21 s0.61 -0.33 0.85 -0.57 s0.43 -0.52 0.57 -0.84 s0.21 -0.66 0.21 -1.02 s-0.07 -0.70334 -0.21 -1.03 s-0.33 -0.61 -0.57 -0.85 s-0.52334 -0.43 -0.85 -0.57 s-0.67 -0.21 -1.03 -0.21 z"></path>
    </g>
  </g>
</svg>
{{- end -}}

{{/* Render logo (with or without link) */}}
<div class="{{ delimit $classes " " }}">
  {{- if $link -}}
    {{- $homeURL := "" -}}
    {{- if eq $context.Language.Lang site.DefaultContentLanguage -}}
      {{- $homeURL = "/" -}}
    {{- else -}}
      {{- $homeURL = printf "/%s/" $context.Language.Lang -}}
    {{- end -}}
    <a href="{{ $homeURL }}" class="c-logo__link" aria-label="{{ i18n `home` | default `Home` }}">
      {{- template "logo-svg-content" . -}}
    </a>
  {{- else -}}
    {{- template "logo-svg-content" . -}}
  {{- end -}}
</div>
