{{/*
  Mobile Menu Molecule - Hamburger navigation toggle with collapsible menu

  BEM Structure: .c-mobile-menu

  Displays mobile hamburger menu toggle button with animated icon
  Includes collapsible menu container with navigation, language selector, and CTA

  Usage:
    {{ partial "molecules/mobile-menu.html" . }}

  Features:
    - BEM structure (.c-mobile-menu)
    - Icon atoms (menu + close icons)
    - Vanilla JavaScript collapse (no Bootstrap dependency)
    - Animated hamburger → X transition
    - Integrates language-selector and navigation molecules
    - Optional CTA button
    - WCAG AA accessible (keyboard nav, ARIA labels, focus indicators)
    - Responsive behavior (mobile only, hidden on desktop ≥992px)

  JavaScript:
    Requires vanilla-collapse.js for collapse functionality:
      data-toggle="collapse"
      data-target="#navHeader"
      aria-controls="navHeader"
      aria-expanded="false"

  SCSS:
    styles/scss/06-components/_mobile-menu.scss

  Backward Compatibility:
    Legacy Bootstrap classes mapped via @extend in SCSS:
      .nav-controller → .c-mobile-menu__controller
      .navbar-toggler → .c-mobile-menu__toggle
      .navbar-collapse → .c-mobile-menu__panel
      .navbar-right → .c-mobile-menu__actions
*/}}

<div class="c-mobile-menu__controller">
  {{/* Mobile Language Selector */}}
  {{ partial "molecules/language-selector.html" (dict "variant" "mobile" "context" .) }}

  {{/* Hamburger Toggle Button */}}
  <button
    class="c-mobile-menu__toggle"
    type="button"
    data-toggle="collapse"
    data-target="#navHeader"
    aria-controls="navHeader"
    aria-expanded="false"
    aria-label="{{ i18n "toggle_navigation" | default "Toggle navigation" }}">
    {{/* Hamburger Icon (visible when menu closed) */}}
    <span class="c-mobile-menu__icon c-mobile-menu__icon--menu">
      {{ partial "atoms/icon.html" (dict "name" "menu" "size" "lg" "variant" "neutral") }}
    </span>
    {{/* Close Icon (visible when menu open) */}}
    <span class="c-mobile-menu__icon c-mobile-menu__icon--close">
      {{ partial "atoms/icon.html" (dict "name" "x" "size" "lg" "variant" "neutral") }}
    </span>
  </button>
</div>

{{/* Collapsible Menu Panel */}}
<div class="c-mobile-menu__panel collapse" id="navHeader">
  {{/* Navigation Menu */}}
  {{ partial "molecules/navigation.html" . }}

  {{/* Desktop Actions: Language Selector & CTA Button */}}
  <div class="c-mobile-menu__actions">
    {{ partial "molecules/language-selector.html" (dict "variant" "desktop" "context" .) }}

    {{/* Optional CTA Button */}}
    {{ if site.Params.navigation_button.enable }}
      {{ partial "atoms/button.html" (dict
        "text" site.Params.navigation_button.label
        "href" site.Params.navigation_button.link
        "variant" "primary"
        "class" "c-mobile-menu__cta"
      ) }}
    {{ end }}
  </div>
</div>
