{{/*
=============================================================================
  Minimal, Fast Therapeutic Loading Circle
  Non-obtrusive, performance-focused approach
  Only shows during actual loading (AJAX, forms, etc.)
=============================================================================
*/}}

<!-- Small therapeutic circle (hidden by default, shows only when loading) -->
<div class="healing-circle" id="healingCircle">
  <div class="healing-circle-inner"></div>
</div>

{{/* Lightweight JavaScript for loading states */}}
<script>
(function() {
  'use strict';
  
  const healingCircle = document.getElementById('healingCircle');
  let loadingTimeout;
  
  // Show loading circle for specific events
  function showLoading() {
    if (healingCircle) {
      healingCircle.classList.add('loading');
    }
  }
  
  // Hide loading circle
  function hideLoading() {
    if (healingCircle) {
      healingCircle.classList.remove('loading');
    }
  }
  
  // Auto-hide after reasonable time
  function autoHideLoading() {
    clearTimeout(loadingTimeout);
    loadingTimeout = setTimeout(hideLoading, 3000); // Max 3 seconds
  }
  
  // Show loading for form submissions
  document.addEventListener('submit', function(e) {
    showLoading();
    autoHideLoading();
  });
  
  // Show loading for AJAX requests (if jQuery available)
  if (window.jQuery) {
    $(document).ajaxStart(showLoading);
    $(document).ajaxStop(hideLoading);
  }
  
  // Show loading for fetch requests
  const originalFetch = window.fetch;
  window.fetch = function(...args) {
    showLoading();
    return originalFetch.apply(this, args)
      .finally(() => {
        setTimeout(hideLoading, 300); // Small delay for visual feedback
      });
  };
  
  // Manual control for developers
  window.therapeuticLoading = {
    show: showLoading,
    hide: hideLoading
  };
  
})();
</script>