<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-evaluare PrietenoasÄƒ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        :root {
            --bg-page: #FEF8F0;
            --outline: #2A2A2A;
            --computer-blue: #6B89E1;
            --computer-screen: #F3EFE4;
            --progress-base: #F3D47B;
            --progress-fill: #E9665A;
        }

        body {
            background-color: var(--bg-page);
            background-image: radial-gradient(var(--outline) 0.5px, transparent 0.5px);
            background-size: 15px 15px; background-position: -7px -7px; opacity: 0.8;
            font-family: 'Nunito', sans-serif;
            color: var(--outline);
            display: flex; align-items: center; justify-content: center;
            min-height: 100vh; padding: 1rem; overflow: hidden;
        }

        .assessment-container {
            position: relative; width: 100%; max-width: 1200px;
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            align-items: center; justify-content: center; gap: 2rem;
        }

        .options-column {
            position: relative;
            height: 600px;
        }
        .computer-column { display: flex; flex-direction: column; align-items: center; }

        .computer {
            position: relative;
            width: 585px;
            height: 455px;
            background-color: var(--computer-blue);
            border: 3px solid var(--outline);
            border-radius: 2.5rem 2.5rem 0.75rem 0.75rem;
            flex-shrink: 0;
        }
        .computer::after {
            content: ''; position: absolute; bottom: -28px; left: 50%;
            transform: translateX(-50%) perspective(65px) rotateX(10deg);
            width: 650px; height: 45px;
            background-color: var(--computer-blue);
            border: 3px solid var(--outline); border-radius: 0.75rem;
        }

        .screen {
            position: absolute; top: 2rem; left: 2rem; right: 2rem; bottom: 2rem;
            background-color: var(--computer-screen);
            border: 3px solid var(--outline); border-radius: 2rem;
            padding: 2rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center;
        }
        #questionContent {
            font-family: 'Patrick Hand', cursive;
            font-size: 2.2rem;
            line-height: 1.3;
            flex-grow: 1;
            display: flex; align-items: center; justify-content: center;
            padding-bottom: 1rem;
        }
        #questionNumber {
            font-size: 1rem; color: #b0a89a; font-weight: 700; margin-bottom: 0.5rem;
        }

        .rating-option {
            position: absolute;
            width: 80px; height: 80px;
            border: 3px solid var(--outline);
            border-radius: 20% 35% 25% 40%;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: 900;
            cursor: pointer; transition: all 0.2s ease;
            animation: float 8s ease-in-out infinite;
            flex-shrink: 0;
            color: var(--outline);
        }
        .rating-option:hover { transform: scale(1.1); }
        .rating-option.selected {
            border-width: 5px;
            border-color: var(--progress-fill);
            animation: wiggle 0.5s ease-in-out;
        }

        .btn {
            margin-top: 3.5rem; padding: 10px 24px;
            font-size: 1.25rem; font-weight: 900;
            border: 3px solid var(--outline); border-radius: 12px;
            background: white;
            box-shadow: 5px 5px 0 0 var(--outline);
            cursor: pointer; transition: all 0.1s ease-in-out;
        }
        .btn:active { transform: translate(5px, 5px); box-shadow: 0 0 0 0 var(--outline); }

        .progress-bar-container {
            position: fixed; bottom: 2rem; left: 10%; right: 10%;
            height: 20px; background-color: var(--progress-base);
            border: 3px solid var(--outline); border-radius: 99px; padding: 4px;
        }
        .progress-bar-fill {
            height: 100%; background-color: var(--progress-fill);
            border-radius: 99px; transition: width 0.5s ease-out; width: 0%;
        }

        /* Doodles & Particles */
        .doodle { position: fixed; animation: float 10s ease-in-out infinite; }
        .doodle-sun { background: #F3A93B; width: 80px; height: 80px; clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); border: 3px solid var(--outline); }
        .doodle-heart { background: #E9665A; width: 50px; height: 50px; clip-path: path("M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"); border: 3px solid var(--outline); }
        .doodle-face { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem;}
        .doodle-q { font-family: 'Patrick Hand', cursive; font-size: 3rem; animation-duration: 12s;}
        .particle {
            position: fixed; width: 10px; height: 10px;
            border: 2px solid var(--outline);
            border-radius: 50%; pointer-events: none; z-index: 9999;
            opacity: 1; transition: transform 0.8s cubic-bezier(.17,.67,.5,1.28), opacity 0.8s ease;
        }
        .encouragement-toast {
            position: fixed; top: 2rem; left: 50%;
            transform: translateX(-50%);
            background: white; border: 3px solid var(--outline);
            padding: 0.75rem 1.5rem; border-radius: 99px;
            font-family: 'Patrick Hand', cursive; font-size: 1.5rem;
            box-shadow: 5px 5px 0 0 var(--outline);
            animation: pop-in-out 4s ease-in-out forwards;
        }

        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        @keyframes pop-in-out { 0% { transform: translate(-50%, -100%); opacity: 0; } 10% { transform: translate(-50%, 0); opacity: 1; } 90% { transform: translate(-50%, 0); opacity: 1; } 100% { transform: translate(-50%, -100%); opacity: 0; } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .animate-fade-out { animation: fadeOut 0.4s ease-in forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadeOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.9); } }
    </style>
</head>
<body>
    <div id="doodle-layer"></div>
    <div id="challengeScreen">
        <div class="assessment-container">
            <div class="computer-column">
                <h2 id="questionCategory" class="text-3xl font-black mb-4">Categorie</h2>
                <div class="computer">
                    <div class="screen">
                        <div id="screen-text-wrapper" class="w-full h-full flex flex-col items-center justify-center">
                            <p id="questionNumber"></p>
                            <p id="questionContent"></p>
                        </div>
                    </div>
                </div>
                <button id="nextBtn" class="btn">UrmÄƒtoarea!</button>
            </div>
            <div id="options-column" class="options-column">
                <!-- Options will be populated here by JS -->
            </div>
        </div>
    </div>

    <div id="endScreen" class="hidden absolute inset-0 flex flex-col items-center justify-center text-center animate-fade-in">
        <h2 class="text-6xl font-black mb-4" style="font-family:'Patrick Hand',cursive;">Gata!</h2>
        <p id="finalResultText" class="text-xl font-bold mb-8 max-w-lg"></p>
        <button id="restartBtn" class="btn">Mai joci o datÄƒ?</button>
    </div>

    <div class="progress-bar-container">
        <div id="progressBar" class="progress-bar-fill"></div>
    </div>
    <script>
        const flatQuestions = Object.entries({
            "AtenÈ›ie È™i Concentrare": [ 
                "ÃŽÈ›i rÄƒtÄƒceÈ™te frecvent mintea Ã®n timpul conversaÈ›iilor, Ã®ntÃ¢lnirilor sau Ã®n timp ce citeÈ™ti, chiar È™i cÃ¢nd Ã®ncerci sÄƒ fii atent/Äƒ?", 
                "CÃ¢nd vizionezi filme sau emisiuni TV, Ã®È›i dai des seama cÄƒ ai ratat puncte importante ale intrigii pentru cÄƒ atenÈ›ia È›i-a fugit, fiind nevoit/Äƒ sÄƒ dai Ã®napoi sau sÄƒ Ã®ntrebi pe alÈ›ii ce s-a Ã®ntÃ¢mplat?", 
                "ÃŽn timpul sarcinilor de lucru care necesitÄƒ atenÈ›ie susÈ›inutÄƒ, cÃ¢t de des Ã®È›i dai seama cÄƒ 'te deconectezi' mental È™i trebuie sÄƒ reciteÈ™ti emailuri, documente sau instrucÈ›iuni de mai multe ori?", 
                "ÃŽÈ›i este greu sÄƒ menÈ›ii atenÈ›ia Ã®n timpul sarcinilor Ã®ndelungate, chiar È™i cÃ¢nd sunt importante sau interesante pentru tine?", 
                "CÃ¢t de des Ã®ncepi sÄƒ asculÈ›i pe cineva vorbind, dar Ã®È›i dai seama cÄƒ pÃ¢nÄƒ la sfÃ¢rÈ™itul propoziÈ›iei lor, nu ai reÈ›inut ce au spus?", 
            ],
            "Organizare È™i Gestionarea Sarcinilor": [ 
                "ÃŽncepi frecvent mai multe proiecte sau sarcini, dar Ã®È›i este greu sÄƒ le termini, rÄƒmÃ¢nÃ¢nd cu o colecÈ›ie de activitÄƒÈ›i pe jumÄƒtate finalizate?", 
                "CÃ¢t de des eviÈ›i sau amÃ¢ni sarcinile care necesitÄƒ efort mental susÈ›inut, cum ar fi completarea documentelor, pregÄƒtirea rapoartelor sau organizarea finanÈ›elor?", 
                "ÃŽÈ›i este dificil sÄƒ Ã®mparÈ›i proiectele mari Ã®n paÈ™i realizabili, simÈ›indu-te adesea copleÈ™it/Äƒ de unde sÄƒ Ã®ncepi?", 
                "Sunt spaÈ›iul tÄƒu de lucru, casa sau fiÈ™ierele digitale cronic dezorganizate, Ã®n ciuda bunelor intenÈ›ii de a menÈ›ine ordinea?", 
                "Subestimezi frecvent cÃ¢t timp vor dura sarcinile, ducÃ¢nd la termene ratate sau muncÄƒ grÄƒbitÄƒ?", 
            ],
            "Memorie È™i UrmÄƒrire": [ 
                "CÃ¢t de des uiÈ›i programÄƒri, angajamente sau termene, Ã®n ciuda sistemelor de memento pe care le ai?", 
                "Pierzi sau rÄƒtÄƒceÈ™ti frecvent obiecte importante precum cheile, telefonul, portofelul, documentele sau ochelarii?", 
                "CÃ¢nd primeÈ™ti instrucÈ›iuni cu mai mulÈ›i paÈ™i, uiÈ›i adesea paÈ™ii din mijloc sau ai nevoie sÄƒ ceri clarificÄƒri Ã®n mod repetat?", 
                "ÃŽncepi sarcini cu intenÈ›ii bune, dar uiÈ›i complet de ele pÃ¢nÄƒ cÃ¢nd cineva Ã®È›i aminteÈ™te sau se apropie un termen limitÄƒ?", 
                "CÃ¢t de des uiÈ›i sÄƒ returnezi apeluri telefonice, sÄƒ rÄƒspunzi la emailuri sau sÄƒ urmÄƒreÈ™ti angajamentele Ã®ntr-un termen rezonabil?", 
            ],
            "ViaÈ›a ZilnicÄƒ È™i Gestionarea Rutinei": [ 
                "ÃŽÈ›i este greu sÄƒ menÈ›ii rutine zilnice consistente, cum ar fi orele regulate de masÄƒ, programul de somn sau Ã®ntreÈ›inerea casei?", 
                "CÃ¢t de des faci greÈ™eli de neatenÈ›ie Ã®n muncÄƒ, finanÈ›e sau documente importante din cauza cÄƒ nu acordi atenÈ›ie suficientÄƒ detaliilor?", 
                "ÃŽntÃ¢rzii frecvent la programÄƒri sau angajamente, Ã®n ciuda planificÄƒrii sÄƒ ajungi la timp?", 
                "ÃŽÈ›i este dificil sÄƒ È›ii evidenÈ›a facturilor, documentelor importante sau responsabilitÄƒÈ›ilor personale fÄƒrÄƒ mementouri externe?", 
                "SimÈ›i adesea cÄƒ 'improvizezi' prin viaÈ›a de zi cu zi, Ã®n loc sÄƒ ai sisteme organizate care funcÈ›ioneazÄƒ Ã®n mod consistent?", 
            ],
            "Impact Ã®n MuncÄƒ È™i Academic": [ 
                "La muncÄƒ sau Ã®n medii educaÈ›ionale, Ã®È›i este greu sÄƒ menÈ›ii atenÈ›ia Ã®n timpul Ã®ntÃ¢lnirilor, cursurilor sau sesiunilor de formare?", 
                "Colegii sau supervizarii trebuie frecvent sÄƒ repete instrucÈ›iuni sau informaÈ›ii pentru cÄƒ ai ratat detalii prima datÄƒ?", 
                "CÃ¢t de des amÃ¢ni proiecte importante de muncÄƒ pÃ¢nÄƒ Ã®n ultimul moment, Ã®n ciuda cunoaÈ™terii stresului pe care Ã®l cauzeazÄƒ?", 
                "SimÈ›i cÄƒ perforezi sub nivelul inteligenÈ›ei sau capacitÄƒÈ›ilor tale la muncÄƒ din cauza provocÄƒrilor cu atenÈ›ia È™i organizarea?", 
                "Ai primit feedback despre faptul cÄƒ eÈ™ti 'absent/Äƒ', 'Ã®mprÄƒÈ™tiat/Äƒ' sau 'nu orientat/Äƒ pe detalii' Ã®n medii profesionale?", 
            ],
            "RelaÈ›ii È™i Impact Social": [ 
                "Membrii familiei sau prietenii se plÃ¢ng cÄƒ nu asculÈ›i cÃ¢nd vorbesc sau cÄƒ pari 'altundeva' Ã®n timpul conversaÈ›iilor?", 
                "CÃ¢t de des uiÈ›i angajamente sociale, zile de naÈ™tere sau evenimente importante din vieÈ›ile oamenilor cÄƒrora le pasÄƒ?", 
                "ÃŽÈ›i este greu sÄƒ menÈ›ii responsabilitÄƒÈ›ile casnice (curÄƒÈ›enie, gÄƒtit, Ã®ntreÈ›inere) Ã®n moduri care afecteazÄƒ relaÈ›iile sau situaÈ›ia locativÄƒ?", 
                "Partenerii romantici È™i-au exprimat frustrarea faÈ›Äƒ de uituciÈ™enia ta, dezorganizarea sau aparenta lipsÄƒ de atenÈ›ie la detaliile relaÈ›iei?", 
            ],
            "Auto-conÈ™tientizare È™i Impact": [ 
                "Privind Ã®napoi la copilÄƒrie È™i adolescenÈ›Äƒ, Ã®È›i aminteÈ™ti sÄƒ fi avut dificultÄƒÈ›i similare cu atenÈ›ia, organizarea sau finalizarea, chiar dacÄƒ nu au fost identificate ca ADHD la acel moment?"
            ]
        }).flatMap(([category, qs]) => qs.map(question => ({ category, question })));

        // --- DOM Elements & State ---
        const challengeScreen = document.getElementById('challengeScreen');
        const endScreen = document.getElementById('endScreen');
        const nextBtn = document.getElementById('nextBtn');
        const finalResultText = document.getElementById('finalResultText');
        const restartBtn = document.getElementById('restartBtn');
        const optionsColumn = document.getElementById('options-column');
        const questionCategory = document.getElementById('questionCategory');
        const questionContent = document.getElementById('questionContent');
        const questionNumber = document.getElementById('questionNumber');
        const progressBar = document.getElementById('progressBar');

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let currentAnswer = null;

        // Initialize game
        function initializeGame() {
            userAnswers = [];
            currentQuestionIndex = 0;
            currentAnswer = null;
            showQuestion();
            setupOptionsLayout();
            createBackgroundDoodles();
        }

        // Display current question
        function showQuestion() {
            const question = flatQuestions[currentQuestionIndex];
            questionCategory.textContent = question.category;
            questionContent.textContent = question.question;
            questionNumber.textContent = `ÃŽntrebarea ${currentQuestionIndex + 1} din ${flatQuestions.length}`;
            
            // Update progress bar
            const progress = ((currentQuestionIndex) / flatQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            // Reset selection
            currentAnswer = null;
            updateOptionsDisplay();
            nextBtn.disabled = true;
            nextBtn.textContent = currentQuestionIndex === flatQuestions.length - 1 ? "FinalizeazÄƒ!" : "UrmÄƒtoarea!";
        }

        // Setup rating options layout (1-10 numeric system)
        function setupOptionsLayout() {
            optionsColumn.innerHTML = '';
            const colors = ['#F3D4D6', '#E3DFF7', '#D3E3F5', '#D4EAE3', '#F3A93B'];
            
            // Pre-defined positions for scattered layout
            const positions = [
                { top: '0%', left: '30%' },    // 1
                { top: '10%', left: '65%' },   // 2
                { top: '22%', left: '15%' },   // 3
                { top: '32%', left: '70%' },   // 4
                { top: '45%', left: '25%' },   // 5
                { top: '55%', left: '60%' },   // 6
                { top: '68%', left: '10%' },   // 7
                { top: '75%', left: '75%' },   // 8
                { top: '88%', left: '20%' },   // 9
                { top: '90%', left: '60%' }    // 10
            ];

            for (let i = 1; i <= 10; i++) {
                const optionElement = document.createElement('div');
                optionElement.className = 'rating-option';
                optionElement.textContent = i;
                optionElement.setAttribute('data-value', i);
                
                const pos = positions[i-1];
                optionElement.style.top = pos.top;
                optionElement.style.left = pos.left;
                optionElement.style.backgroundColor = colors[i % colors.length];
                optionElement.style.animationDelay = `${(i * 0.05) + 0.1}s`;
                
                optionElement.addEventListener('click', () => selectOption(i));
                optionsColumn.appendChild(optionElement);
            }
        }

        // Handle option selection
        function selectOption(value) {
            currentAnswer = value;
            updateOptionsDisplay();
            nextBtn.disabled = false;
            
            // Create particles effect
            createParticles();
            
            // Show encouragement message
            if (Math.random() < 0.3) {
                showEncouragementToast();
            }
            
            // Play sound effect
            if (window.Tone) {
                const synth = new Tone.Synth().toDestination();
                synth.triggerAttackRelease("C5", "8n");
            }
        }

        // Update visual display of options
        function updateOptionsDisplay() {
            const options = document.querySelectorAll('.rating-option');
            options.forEach(option => {
                const value = parseInt(option.getAttribute('data-value'));
                if (value === currentAnswer) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        }

        // Move to next question or show results
        function nextQuestion() {
            if (currentAnswer === null) return;
            
            userAnswers.push(currentAnswer);
            
            if (currentQuestionIndex < flatQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show final results
        function showResults() {
            challengeScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            
            const totalScore = userAnswers.reduce((sum, answer) => sum + answer, 0);
            const maxScore = flatQuestions.length * 10;
            const percentage = Math.round((totalScore / maxScore) * 100);
            
            let resultText = '';
            if (percentage < 25) {
                resultText = `Scorul tÄƒu: ${totalScore}/${maxScore} (${percentage}%) - PuÈ›ine simptome ADHD raportate. ContinuÄƒ sÄƒ te monitorizezi È™i considerÄƒ consultarea unui specialist pentru orice preocupÄƒri.`;
            } else if (percentage < 50) {
                resultText = `Scorul tÄƒu: ${totalScore}/${maxScore} (${percentage}%) - Unele simptome ADHD prezente. Ar putea fi util sÄƒ discuÈ›i aceste rezultate cu un profesionist Ã®n sÄƒnÄƒtatea mintalÄƒ.`;
            } else if (percentage < 75) {
                resultText = `Scorul tÄƒu: ${totalScore}/${maxScore} (${percentage}%) - Simptome moderate-ridicate de ADHD. Se recomandÄƒ evaluarea de cÄƒtre un clinician calificat pentru o evaluare profesionalÄƒ.`;
            } else {
                resultText = `Scorul tÄƒu: ${totalScore}/${maxScore} (${percentage}%) - Simptome semnificative de ADHD raportate. ConsultaÈ›ia cu un specialist ADHD este foarte recomandatÄƒ pentru evaluare È™i opÈ›iuni de tratament.`;
            }
            
            finalResultText.textContent = resultText;
        }

        // Create floating particles effect
        function createParticles() {
            const colors = ['#F3D4D6', '#E3DFF7', '#D3E3F5', '#D4EAE3', '#F3A93B'];
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.top = Math.random() * 100 + 'vh';
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.style.transform = `translateY(-${Math.random() * 200 + 100}px) scale(0)`;
                        particle.style.opacity = '0';
                    }, 50);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 1000);
                }, i * 100);
            }
        }

        // Show encouragement toast
        function showEncouragementToast() {
            const encouragementMessages = [
                "Merge grozav! ðŸŒŸ", "EÈ™ti pe drumul cel bun! ðŸ’ª", "Fantastic! ðŸŽ‰", 
                "Continui excelent! âœ¨", "Bravo! ðŸ‘", "EÈ™ti minunat/Äƒ! ðŸŒˆ", 
                "Progresezi fantastic! ðŸš€", "Perfect! ðŸ’«", "Extraordinar! ðŸŽŠ", "Incredibil! ðŸŒŸ"
            ];
            
            const toast = document.createElement('div');
            toast.className = 'encouragement-toast';
            toast.textContent = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 4000);
        }

        // Create background doodles
        function createBackgroundDoodles() {
            const doodleLayer = document.getElementById('doodle-layer');
            
            // Create various doodles
            const doodles = [
                { class: 'doodle-sun', count: 2 },
                { class: 'doodle-heart', count: 3 },
                { class: 'doodle-q', content: '?', count: 4 }
            ];
            
            doodles.forEach(doodleType => {
                for (let i = 0; i < doodleType.count; i++) {
                    const doodle = document.createElement('div');
                    doodle.className = `doodle ${doodleType.class}`;
                    
                    if (doodleType.content) {
                        doodle.textContent = doodleType.content;
                    }
                    
                    doodle.style.top = Math.random() * 100 + 'vh';
                    doodle.style.left = Math.random() * 100 + 'vw';
                    doodle.style.animationDelay = Math.random() * 10 + 's';
                    
                    doodleLayer.appendChild(doodle);
                }
            });
        }

        // Event listeners
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', initializeGame);

        // Start the game
        initializeGame();
    </script>
</body>
</html>